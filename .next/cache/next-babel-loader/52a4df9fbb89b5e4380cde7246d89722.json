{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/components/chatBot/ChatOrderList.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport dynamic from 'next/dynamic';\nimport { connect } from \"react-redux\";\nimport classNames from \"classnames\";\nimport moment from \"moment\";\nimport { getOrders } from \"../../services/api\";\nimport { makeCancelable } from \"../../services/makeCancelable\";\nimport ChatMsgList from \"./ChatMsgList\";\nvar chatMsgList = new ChatMsgList();\n\nvar ChatOrderList = /*#__PURE__*/function (_Component) {\n  _inherits(ChatOrderList, _Component);\n\n  var _super = _createSuper(ChatOrderList);\n\n  function ChatOrderList() {\n    var _this;\n\n    _classCallCheck(this, ChatOrderList);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"getOrderList\", function () {\n      _this.cancelableOrders = makeCancelable(getOrders(_this.props.user.userMetaId), function (res) {\n        var resJson = res.data;\n\n        if (resJson.status) {\n          var orderList = resJson.orders.sort(function (a, b) {\n            return new Date(b.createdOn) - new Date(a.createdOn);\n          });\n\n          if (!orderList || orderList && orderList.length < 1) {\n            _this.props.triggerNextStep({\n              trigger: \"repeat\"\n            });\n          }\n\n          _this.setState({\n            orderList: orderList,\n            isLoading: false\n          });\n        }\n      }, function (err) {\n        console.log({\n          err: err\n        });\n      });\n    });\n\n    _this.state = {\n      orderList: [],\n      isLoading: true,\n      selected: null\n    };\n    return _this;\n  }\n\n  _createClass(ChatOrderList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getOrderList();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.cancelableOrders) this.cancelableOrders();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          orderList = _this$state.orderList,\n          isLoading = _this$state.isLoading,\n          selected = _this$state.selected;\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 7\n        }\n      }, isLoading && __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 23\n        }\n      }, \"...\"), isLoading && (!orderList || orderList && orderList.length < 1) && __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }\n      }, chatMsgList.noOrdersMsg()), !isLoading && orderList && orderList.length > 0 && orderList.map(function (el, index) {\n        var product = el.products && el.products[0].title;\n        return __jsx(\"p\", {\n          className: classNames(\"chat-custom-option\", {\n            selected: selected === el._id\n          }),\n          onClick: function onClick() {\n            if (!selected) {\n              _this2.setState({\n                orderList: orderList.filter(function (elx) {\n                  return elx._id === el._id;\n                }),\n                selected: el._id\n              }, function () {\n                _this2.props.triggerNextStep({\n                  value: el\n                });\n              });\n            }\n          },\n          key: index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }\n        }, el.createdOn ? moment(el.createdOn).format(\"MMM DD, YYYY\") + \" (\".concat(product, \")\") : product);\n      }));\n    }\n  }]);\n\n  return ChatOrderList;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps)(ChatOrderList);","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/components/chatBot/ChatOrderList.js"],"names":["React","Component","dynamic","connect","classNames","moment","getOrders","makeCancelable","ChatMsgList","chatMsgList","ChatOrderList","cancelableOrders","props","user","userMetaId","res","resJson","data","status","orderList","orders","sort","a","b","Date","createdOn","length","triggerNextStep","trigger","setState","isLoading","err","console","log","state","selected","getOrderList","noOrdersMsg","map","el","index","product","products","title","_id","filter","elx","value","format","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport dynamic from 'next/dynamic'\nimport { connect } from \"react-redux\";\nimport classNames from \"classnames\";\nimport moment from \"moment\";\nimport { getOrders } from \"../../services/api\";\nimport { makeCancelable } from \"../../services/makeCancelable\";\nimport  ChatMsgList from \"./ChatMsgList\";\nconst chatMsgList = new ChatMsgList();\nclass ChatOrderList extends Component {\n  constructor() {\n    super();\n    this.state = {\n      orderList: [],\n      isLoading: true,\n      selected: null\n    };\n  }\n  componentDidMount() {\n    this.getOrderList();\n  }\n  componentWillUnmount() {\n    if (this.cancelableOrders) this.cancelableOrders();\n  }\n  getOrderList = () => {\n    this.cancelableOrders = makeCancelable(\n      getOrders(this.props.user.userMetaId),\n      res => {\n        const resJson = res.data\n        if (resJson.status) {\n          const orderList = resJson.orders.sort(function(a, b) {\n            return new Date(b.createdOn) - new Date(a.createdOn);\n          });\n          if (!orderList || (orderList && orderList.length < 1)) {\n            this.props.triggerNextStep({\n              trigger: \"repeat\"\n            });\n          }\n          this.setState({\n            orderList: orderList,\n            isLoading: false\n          });\n        }\n      },\n      err => {\n        console.log({ err });\n      }\n    );\n  };\n  render() {\n    const { orderList, isLoading, selected } = this.state;\n    return (\n      <div>\n        {isLoading && <div>...</div>}\n        {isLoading && (!orderList || (orderList && orderList.length < 1)) && (\n          <div>{chatMsgList.noOrdersMsg()}</div>\n        )}\n        {!isLoading &&\n          orderList &&\n          orderList.length > 0 &&\n          orderList.map((el, index) => {\n            const product = el.products && el.products[0].title;\n            return (\n              <p\n                className={classNames(\"chat-custom-option\", {\n                  selected: selected === el._id\n                })}\n                onClick={() => {\n                  if (!selected) {\n                    this.setState(\n                      {\n                        orderList: orderList.filter(elx => elx._id === el._id),\n                        selected: el._id\n                      },\n                      () => {\n                        this.props.triggerNextStep({\n                          value: el\n                        });\n                      }\n                    );\n                  }\n                }}\n                key={index}\n              >\n                {el.createdOn\n                  ? moment(el.createdOn).format(\"MMM DD, YYYY\") +\n                    ` (${product})`\n                  : product}\n              </p>\n            );\n          })}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.user\n});\nexport default connect(mapStateToProps)(ChatOrderList);\n"]},"metadata":{},"sourceType":"module"}