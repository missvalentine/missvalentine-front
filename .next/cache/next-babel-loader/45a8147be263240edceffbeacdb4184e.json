{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/pages/admin/product/create.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport '../../../components/styles/app.scss';\nimport AdminLayout from '../../../components/admin/AdminLayout';\nimport { Input, Button, Select } from 'antd';\nimport { createProduct, getAllCategories } from '../../../services/apis/admin.js';\nvar Option = Select.Option; //constants\n\nvar allSizes = ['32', '34', '36'];\nvar allColors = ['red', 'green', 'blue'];\nexport default function create(props) {\n  _s();\n\n  var _this = this;\n\n  var editData = props.editData;\n\n  var _useState = useState({\n    name: '',\n    shortDesc: '',\n    description: '',\n    category: '',\n    price: '',\n    sizes: [],\n    colors: [],\n    hidden: false,\n    images: []\n  }),\n      inputData = _useState[0],\n      setInputData = _useState[1];\n\n  var _useState2 = useState([]),\n      imagesURL = _useState2[0],\n      setImagesURL = _useState2[1];\n\n  var _useState3 = useState([]),\n      categories = _useState3[0],\n      setCategories = _useState3[1];\n\n  var _useState4 = useState([]),\n      subCategories = _useState4[0],\n      setSubCategories = _useState4[1];\n\n  var _useState5 = useState([]),\n      selectedSubCategories = _useState5[0],\n      setSelectedSubCategories = _useState5[1];\n\n  useEffect(function () {\n    if (editData) {\n      var newInputData = _objectSpread({}, inputData);\n\n      newInputData.sizes = editData.sizes;\n      setInputData(newInputData);\n    }\n  }, []);\n  useEffect(function () {\n    getAllCategories().then(function (res) {\n      return res && res.data && setCategories(res.data.data);\n    });\n  }, []);\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var formData, tempSubCategories, fileListAsArray, i;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              console.log(inputData);\n              formData = new FormData(); // Object.keys(inputData).forEach((key) => {\n              // });\n\n              tempSubCategories = subCategories.map(function (c) {\n                return c._id;\n              });\n              formData.set('name', inputData.name);\n              formData.set('shortDesc', inputData.shortDesc);\n              formData.set('description', inputData.description);\n              formData.set('category', inputData.category);\n              formData.set('price', inputData.price);\n              formData.set('hidden', inputData.hidden);\n              formData.set('sizes', JSON.stringify(inputData.sizes));\n              formData.set('colors', JSON.stringify(inputData.colors));\n              formData.set('subCategories', JSON.stringify(tempSubCategories)); //for Images\n\n              fileListAsArray = Array.from(inputData.images);\n\n              for (i in fileListAsArray) {\n                console.log(fileListAsArray[i]);\n                formData.append('images', fileListAsArray[i]);\n              }\n\n              createProduct(formData);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange(e) {\n    var _objectSpread2;\n\n    return setInputData(_objectSpread(_objectSpread({}, inputData), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, e.target.name, e.target.value), _defineProperty(_objectSpread2, \"error\", ''), _objectSpread2)));\n  };\n\n  var handleCheckChange = function handleCheckChange(e) {\n    return setInputData(_objectSpread(_objectSpread({}, inputData), {}, {\n      hidden: e.target.checked\n    }));\n  };\n\n  var handleCategoryChange = function handleCategoryChange(cate) {\n    setInputData(_objectSpread(_objectSpread({}, inputData), {}, {\n      category: cate._id,\n      subCategories: []\n    }));\n    setSubCategories(cate.subcategories);\n    setSelectedSubCategories([]);\n  };\n\n  var handleSizeChange = function handleSizeChange(e) {\n    return setInputData(_objectSpread(_objectSpread({}, inputData), {}, {\n      sizes: e.target.value\n    }));\n  };\n\n  var handleColorsChange = function handleColorsChange(e) {\n    return setInputData(_objectSpread(_objectSpread({}, inputData), {}, {\n      colors: e.target.value\n    }));\n  };\n\n  var handleSubCategoryChange = function handleSubCategoryChange(value) {\n    setSelectedSubCategories(value);\n  };\n\n  var handleImagesChange = function handleImagesChange(e) {\n    var fileList = e.target.files;\n    var fileListURL = [];\n\n    for (var i = 0; i < fileList.length; i++) {\n      var file = fileList[i];\n      fileListURL.push(URL.createObjectURL(file));\n    }\n\n    setInputData(_objectSpread(_objectSpread({}, inputData), {}, {\n      images: e.target.files\n    }));\n    setImagesURL(fileListURL);\n  };\n\n  return __jsx(AdminLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, categories && categories.length > 0 ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \" \", editData ? ' Edit ' : 'Enter ', \" Product Details\"), __jsx(\"div\", {\n    className: \"c-admin-create-product__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, __jsx(Select // onChange={handleCategoryChange}\n  , {\n    style: {\n      width: '100%'\n    },\n    placeholder: \"Please select category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, categories.map(function (cate, index) {\n    return __jsx(Option, {\n      key: index,\n      value: cate._id,\n      name: cate.name,\n      onClick: function onClick() {\n        return handleCategoryChange(cate);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, cate.name);\n  }))), __jsx(\"div\", {\n    className: \"c-admin-create-product__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, __jsx(Select, {\n    value: selectedSubCategories || [],\n    onChange: handleSubCategoryChange,\n    mode: \"multiple\",\n    placeholder: \"Select subcategories\",\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, subCategories.map(function (subcategory, index) {\n    return __jsx(Option, {\n      key: index,\n      value: subcategory._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, subcategory.name);\n  }))), __jsx(\"div\", {\n    className: \"c-admin-create-product__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    id: \"name\",\n    placeholder: \"Enter Product Name\",\n    label: \"Product Name\",\n    name: \"name\",\n    required: true,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: \"c-admin-create-product__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, __jsx(Input.TextArea, {\n    id: \"short-desc-input\",\n    label: \"Short Description\",\n    name: \"shortDesc\",\n    required: true,\n    rows: 2,\n    onChange: handleChange,\n    placeholder: \"write a short description about the product.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }))) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }, \"Create a Category first\"));\n}\n\n_s(create, \"GJD6fLnEMJRM7JnUS6B9yfjrjto=\");","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/pages/admin/product/create.js"],"names":["React","useState","useEffect","AdminLayout","Input","Button","Select","createProduct","getAllCategories","Option","allSizes","allColors","create","props","editData","name","shortDesc","description","category","price","sizes","colors","hidden","images","inputData","setInputData","imagesURL","setImagesURL","categories","setCategories","subCategories","setSubCategories","selectedSubCategories","setSelectedSubCategories","newInputData","then","res","data","handleSubmit","e","preventDefault","console","log","formData","FormData","tempSubCategories","map","c","_id","set","JSON","stringify","fileListAsArray","Array","from","i","append","handleChange","target","value","handleCheckChange","checked","handleCategoryChange","cate","subcategories","handleSizeChange","handleColorsChange","handleSubCategoryChange","handleImagesChange","fileList","files","fileListURL","length","file","push","URL","createObjectURL","width","index","subcategory"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../../../components/styles/app.scss';\nimport AdminLayout from '../../../components/admin/AdminLayout';\n\nimport { Input, Button, Select } from 'antd';\n\nimport {\n  createProduct,\n  getAllCategories,\n} from '../../../services/apis/admin.js';\n\nconst { Option } = Select;\n\n//constants\nconst allSizes = ['32', '34', '36'];\nconst allColors = ['red', 'green', 'blue'];\n\nexport default function create(props) {\n  const { editData } = props;\n\n  const [inputData, setInputData] = useState({\n    name: '',\n    shortDesc: '',\n    description: '',\n    category: '',\n    price: '',\n    sizes: [],\n    colors: [],\n    hidden: false,\n    images: [],\n  });\n  const [imagesURL, setImagesURL] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [subCategories, setSubCategories] = useState([]);\n  const [selectedSubCategories, setSelectedSubCategories] = useState([]);\n\n  useEffect(() => {\n    if (editData) {\n      let newInputData = { ...inputData };\n      newInputData.sizes = editData.sizes;\n      setInputData(newInputData);\n    }\n  }, []);\n\n  useEffect(() => {\n    getAllCategories().then(\n      (res) => res && res.data && setCategories(res.data.data)\n    );\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log(inputData);\n    let formData = new FormData();\n    // Object.keys(inputData).forEach((key) => {\n    // });\n\n    let tempSubCategories = subCategories.map((c) => c._id);\n\n    formData.set('name', inputData.name);\n    formData.set('shortDesc', inputData.shortDesc);\n    formData.set('description', inputData.description);\n    formData.set('category', inputData.category);\n    formData.set('price', inputData.price);\n    formData.set('hidden', inputData.hidden);\n    formData.set('sizes', JSON.stringify(inputData.sizes));\n    formData.set('colors', JSON.stringify(inputData.colors));\n    formData.set('subCategories', JSON.stringify(tempSubCategories));\n\n    //for Images\n    const fileListAsArray = Array.from(inputData.images);\n    for (var i in fileListAsArray) {\n      console.log(fileListAsArray[i]);\n      formData.append('images', fileListAsArray[i]);\n    }\n    createProduct(formData);\n  };\n\n  const handleChange = (e) =>\n    setInputData({ ...inputData, [e.target.name]: e.target.value, error: '' });\n\n  const handleCheckChange = (e) =>\n    setInputData({ ...inputData, hidden: e.target.checked });\n\n  const handleCategoryChange = (cate) => {\n    setInputData({ ...inputData, category: cate._id, subCategories: [] });\n    setSubCategories(cate.subcategories);\n    setSelectedSubCategories([]);\n  };\n  const handleSizeChange = (e) =>\n    setInputData({ ...inputData, sizes: e.target.value });\n\n  const handleColorsChange = (e) =>\n    setInputData({ ...inputData, colors: e.target.value });\n\n  const handleSubCategoryChange = (value) => {\n    setSelectedSubCategories(value);\n  };\n\n  const handleImagesChange = (e) => {\n    const fileList = e.target.files;\n    const fileListURL = [];\n\n    for (var i = 0; i < fileList.length; i++) {\n      const file = fileList[i];\n      fileListURL.push(URL.createObjectURL(file));\n    }\n\n    setInputData({\n      ...inputData,\n      images: e.target.files,\n    });\n    setImagesURL(fileListURL);\n  };\n\n  return (\n    <AdminLayout>\n      {categories && categories.length > 0 ? (\n        <div>\n          <h3> {editData ? ' Edit ' : 'Enter '} Product Details</h3>\n          <div className=\"c-admin-create-product__item\">\n            <Select\n              // onChange={handleCategoryChange}\n              style={{ width: '100%' }}\n              placeholder=\"Please select category\"\n            >\n              {categories.map((cate, index) => (\n                <Option\n                  key={index}\n                  value={cate._id}\n                  name={cate.name}\n                  onClick={() => handleCategoryChange(cate)}\n                >\n                  {cate.name}\n                </Option>\n              ))}\n            </Select>\n          </div>\n\n          <div className=\"c-admin-create-product__item\">\n            <Select\n              value={selectedSubCategories || []}\n              onChange={handleSubCategoryChange}\n              mode=\"multiple\"\n              placeholder=\"Select subcategories\"\n              style={{ width: '100%' }}\n            >\n              {subCategories.map((subcategory, index) => (\n                <Option key={index} value={subcategory._id}>\n                  {subcategory.name}\n                </Option>\n              ))}\n            </Select>\n          </div>\n\n          <div className=\"c-admin-create-product__item\">\n            <Input\n              id=\"name\"\n              placeholder=\"Enter Product Name\"\n              label=\"Product Name\"\n              name=\"name\"\n              required\n              onChange={handleChange}\n            />\n          </div>\n\n          <div className=\"c-admin-create-product__item\">\n            <Input.TextArea\n              id=\"short-desc-input\"\n              label=\"Short Description\"\n              name=\"shortDesc\"\n              required\n              rows={2}\n              onChange={handleChange}\n              placeholder=\"write a short description about the product.\"\n            />\n          </div>\n        </div>\n      ) : (\n        <div>Create a Category first</div>\n      )}\n    </AdminLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}