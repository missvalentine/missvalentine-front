{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport dynamic from 'next/dynamic';\nimport '../../components/styles/app.scss';\nvar Layout = dynamic(function () {\n  return import('../../components/Layouts/Layout');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/Layouts/Layout')];\n    },\n    modules: ['../../components/Layouts/Layout']\n  }\n});\nvar ProductInfo = dynamic(function () {\n  return import('../../components/ProductInfo');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/ProductInfo')];\n    },\n    modules: ['../../components/ProductInfo']\n  }\n});\nvar HImgSection = dynamic(function () {\n  return import('../../components/HImgSection');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/HImgSection')];\n    },\n    modules: ['../../components/HImgSection']\n  }\n});\nimport { useEffect, useState } from 'react';\nimport { getProductImage, getProductAttributes, getVisibleProducts, getProductDescription } from '../../services/helpers/product';\nvar Heading = dynamic(function () {\n  return import('../../components/Heading');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/Heading')];\n    },\n    modules: ['../../components/Heading']\n  }\n});\nvar TitleList = dynamic(function () {\n  return import('../../components/TItleList');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/TItleList')];\n    },\n    modules: ['../../components/TItleList']\n  }\n});\nvar ProductDetailsTab = dynamic(function () {\n  return import('../../components/ProductDetailsTab');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/ProductDetailsTab')];\n    },\n    modules: ['../../components/ProductDetailsTab']\n  }\n});\nvar ProductSlider = dynamic(function () {\n  return import('../../components/ProductSlider');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/ProductSlider')];\n    },\n    modules: ['../../components/ProductSlider']\n  }\n});\nimport { useSelector, useDispatch } from 'react-redux';\nimport ProductDetail from '../../components/ProductDetail';\nimport { useRouter } from 'next/router';\nimport { connect } from 'react-redux';\nimport fetch from 'isomorphic-unfetch';\nimport projectSettings from '../../constants/projectSettings';\nimport apiList from '../../services/apis/apiList';\nimport Error from 'next/error';\nvar product = {\n  title: 'CBD Isolate 500 mg'\n};\nimport { getProduct } from '../../redux/actions';\n\nvar Product = function Product() {\n  var _useState = useState(false),\n      isScrolled = _useState[0],\n      setIsScrolled = _useState[1];\n\n  useEffect(function () {\n    setIsScrolled(true);\n    document.body.scrollTop = document.documentElement.scrollTop = 0;\n  }, isScrolled);\n  var router = useRouter();\n  var pid = router.query.pid;\n  var dispatch = useDispatch();\n  var products = useSelector(function (state) {\n    return state.products;\n  });\n  useEffect(function () {\n    console.log('pid', pid);\n    dispatch(getProduct(pid));\n  }, []);\n  useEffect(function () {\n    if (products.product !== null) dispatch({\n      type: 'ADD_TO_RECENTLY_VIEWD',\n      payload: products.product\n    });\n  }, [products.product]);\n  return __jsx(Layout, {\n    headerTheme: \"black\",\n    fixed: true\n  }, __jsx(ProductDetail, {\n    data: products.product\n  }), products.products !== [] && __jsx(\"div\", {\n    className: \"c-product-single__related-section\"\n  }, __jsx(\"div\", {\n    className: \"row justify-content-center\",\n    style: {\n      maxWidth: '100%'\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-6\"\n  }, __jsx(Heading, {\n    style: {\n      textAlign: 'center'\n    },\n    versions: ['default', 'upper', 'weight-500']\n  }, \"YOU MAY ALSO LIKE\")), __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(ProductSlider, {\n    parentClass: \"c-product-single\",\n    products: products.products\n  })))), products.recentlyViewed !== [] && __jsx(\"div\", {\n    className: \"c-product-single__related-section\"\n  }, __jsx(\"div\", {\n    className: \"row justify-content-center\",\n    style: {\n      maxWidth: '100%'\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-6\"\n  }, __jsx(Heading, {\n    style: {\n      textAlign: 'center'\n    },\n    versions: ['default', 'upper', 'weight-500']\n  }, \"RECENTLY VIEWED\")), __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(ProductSlider, {\n    parentClass: \"c-product-single\",\n    products: products.recentlyViewed\n  })))));\n}; // Product.getInitialProps = async ({ query, res: resMain }) => {\n// let product = null;\n// const res = await fetch(apiList.getProductByName + query.pid);\n// // const res           = await fetch(apiList.getProductById+query.pid)\n// const productObj = await res.json();\n// if (!productObj.product_details) {\n//   const res = await fetch(apiList.getProductById + query.pid);\n//   const productObj = await res.json();\n//   product = getVisibleProducts([productObj.product_details]);\n// } else {\n//   product = getVisibleProducts([productObj.product_details]);\n// }\n// const reviewRes = await fetch(\n//   apiList.getReviews + productObj.product_details._id\n// );\n// const reviews = await reviewRes.json();\n// const allRes = await fetch(apiList.getAllProducts);\n// const allProductObj = await allRes.json();\n// const allProducts = getVisibleProducts(allProductObj.products).filter(\n//   (el) => el._id !== query.pid\n// );\n// if (product.length && product[0] && productObj.status) {\n//   return {\n//     res,\n//     product: product.length && product[0],\n//     productObj,\n//     allProducts,\n//     allProductObj,\n//     reviews: reviews.reviews,\n//   };\n// }\n// resMain.statusCode = 404;\n// return {\n//   err: {\n//     statusCode: 404,\n//   },\n// };\n// };\n\n\nexport default Product; // export default connect((state) => ({\n//   cart: state.cart,\n//   user: state.user,\n// }))(Product);","map":null,"metadata":{},"sourceType":"module"}