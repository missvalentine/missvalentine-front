{"ast":null,"code":"var _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missnew front/components/chatBot/ChatOrderList.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport dynamic from 'next/dynamic';\nimport { connect } from \"react-redux\";\nimport classNames from \"classnames\";\nimport moment from \"moment\";\nimport { getOrders } from \"../../services/api\";\nimport { makeCancelable } from \"../../services/makeCancelable\";\nimport ChatMsgList from \"./ChatMsgList\";\nconst chatMsgList = new ChatMsgList();\n\nclass ChatOrderList extends Component {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"getOrderList\", () => {\n      this.cancelableOrders = makeCancelable(getOrders(this.props.user.userMetaId), res => {\n        const resJson = res.data;\n\n        if (resJson.status) {\n          const orderList = resJson.orders.sort(function (a, b) {\n            return new Date(b.createdOn) - new Date(a.createdOn);\n          });\n\n          if (!orderList || orderList && orderList.length < 1) {\n            this.props.triggerNextStep({\n              trigger: \"repeat\"\n            });\n          }\n\n          this.setState({\n            orderList: orderList,\n            isLoading: false\n          });\n        }\n      }, err => {\n        console.log({\n          err\n        });\n      });\n    });\n\n    this.state = {\n      orderList: [],\n      isLoading: true,\n      selected: null\n    };\n  }\n\n  componentDidMount() {\n    this.getOrderList();\n  }\n\n  componentWillUnmount() {\n    if (this.cancelableOrders) this.cancelableOrders();\n  }\n\n  render() {\n    const {\n      orderList,\n      isLoading,\n      selected\n    } = this.state;\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    }, isLoading && __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 23\n      }\n    }, \"...\"), isLoading && (!orderList || orderList && orderList.length < 1) && __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }, chatMsgList.noOrdersMsg()), !isLoading && orderList && orderList.length > 0 && orderList.map((el, index) => {\n      const product = el.products && el.products[0].title;\n      return __jsx(\"p\", {\n        className: classNames(\"chat-custom-option\", {\n          selected: selected === el._id\n        }),\n        onClick: () => {\n          if (!selected) {\n            this.setState({\n              orderList: orderList.filter(elx => elx._id === el._id),\n              selected: el._id\n            }, () => {\n              this.props.triggerNextStep({\n                value: el\n              });\n            });\n          }\n        },\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }\n      }, el.createdOn ? moment(el.createdOn).format(\"MMM DD, YYYY\") + ` (${product})` : product);\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.user\n});\n\nexport default connect(mapStateToProps)(ChatOrderList);","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missnew front/components/chatBot/ChatOrderList.js"],"names":["React","Component","dynamic","connect","classNames","moment","getOrders","makeCancelable","ChatMsgList","chatMsgList","ChatOrderList","constructor","cancelableOrders","props","user","userMetaId","res","resJson","data","status","orderList","orders","sort","a","b","Date","createdOn","length","triggerNextStep","trigger","setState","isLoading","err","console","log","state","selected","componentDidMount","getOrderList","componentWillUnmount","render","noOrdersMsg","map","el","index","product","products","title","_id","filter","elx","value","format","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport dynamic from 'next/dynamic'\nimport { connect } from \"react-redux\";\nimport classNames from \"classnames\";\nimport moment from \"moment\";\nimport { getOrders } from \"../../services/api\";\nimport { makeCancelable } from \"../../services/makeCancelable\";\nimport  ChatMsgList from \"./ChatMsgList\";\nconst chatMsgList = new ChatMsgList();\nclass ChatOrderList extends Component {\n  constructor() {\n    super();\n    this.state = {\n      orderList: [],\n      isLoading: true,\n      selected: null\n    };\n  }\n  componentDidMount() {\n    this.getOrderList();\n  }\n  componentWillUnmount() {\n    if (this.cancelableOrders) this.cancelableOrders();\n  }\n  getOrderList = () => {\n    this.cancelableOrders = makeCancelable(\n      getOrders(this.props.user.userMetaId),\n      res => {\n        const resJson = res.data\n        if (resJson.status) {\n          const orderList = resJson.orders.sort(function(a, b) {\n            return new Date(b.createdOn) - new Date(a.createdOn);\n          });\n          if (!orderList || (orderList && orderList.length < 1)) {\n            this.props.triggerNextStep({\n              trigger: \"repeat\"\n            });\n          }\n          this.setState({\n            orderList: orderList,\n            isLoading: false\n          });\n        }\n      },\n      err => {\n        console.log({ err });\n      }\n    );\n  };\n  render() {\n    const { orderList, isLoading, selected } = this.state;\n    return (\n      <div>\n        {isLoading && <div>...</div>}\n        {isLoading && (!orderList || (orderList && orderList.length < 1)) && (\n          <div>{chatMsgList.noOrdersMsg()}</div>\n        )}\n        {!isLoading &&\n          orderList &&\n          orderList.length > 0 &&\n          orderList.map((el, index) => {\n            const product = el.products && el.products[0].title;\n            return (\n              <p\n                className={classNames(\"chat-custom-option\", {\n                  selected: selected === el._id\n                })}\n                onClick={() => {\n                  if (!selected) {\n                    this.setState(\n                      {\n                        orderList: orderList.filter(elx => elx._id === el._id),\n                        selected: el._id\n                      },\n                      () => {\n                        this.props.triggerNextStep({\n                          value: el\n                        });\n                      }\n                    );\n                  }\n                }}\n                key={index}\n              >\n                {el.createdOn\n                  ? moment(el.createdOn).format(\"MMM DD, YYYY\") +\n                    ` (${product})`\n                  : product}\n              </p>\n            );\n          })}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.user\n});\nexport default connect(mapStateToProps)(ChatOrderList);\n"]},"metadata":{},"sourceType":"module"}