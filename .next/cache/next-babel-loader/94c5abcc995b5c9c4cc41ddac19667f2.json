{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/components/MobileMenus.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport classNames from 'classnames';\nimport './styles/app.scss';\nimport { Menu, Dropdown } from 'antd';\nimport Input from './form-components/Input';\nimport { SearchOutlined } from '@ant-design/icons';\nimport apiList from '../services/apis/apiList';\nimport { getVisibleProducts, addSlugToProduct, getProductTitle, getProductShortDesc, getBasicPrice } from '../services/helpers/product';\nimport projectSettings from '../constants/projectSettings';\nimport CartItem from './CartItem';\nimport { numberFormat } from '../services/helpers/misc';\nvar SubMenu = Menu.SubMenu;\n\nvar MobileMenu = function MobileMenu(_ref) {\n  _s();\n\n  var items = _ref.items,\n      user = _ref.user,\n      toggleCartBar = _ref.toggleCartBar,\n      toggleRegBar = _ref.toggleRegBar;\n\n  var _useState = useState(false),\n      isOpen = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState(''),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var _useState3 = useState(false),\n      display = _useState3[0],\n      setDisplay = _useState3[1];\n\n  var _useState4 = useState([]),\n      products = _useState4[0],\n      setProducts = _useState4[1];\n\n  var onSubmit = function onSubmit(e) {\n    //console.log(`${window.location.origin}/search/${search}`);\n    // window.location.href(`${window.location.origin}/search/${search}`)\n    if (e.key === 'Enter') {\n      Router.push(\"/search/\".concat(search));\n    }\n  };\n\n  var menu = __jsx(\"div\", {\n    className: \"search-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, __jsx(Menu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    style: {\n      marginTop: '40px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }), products.length > 0 ? products.map(function (product, i) {\n    return __jsx(Menu.Item, {\n      style: {\n        height: 'fit-content'\n      },\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"c-cart-drawer\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 15\n      }\n    }, __jsx(CartItem, {\n      key: i,\n      title: product.title,\n      image: product.image,\n      subTitle: product.totalcbdmg,\n      price: \"$\".concat(numberFormat(parseFloat(product.price.sale_price))),\n      isSearch: true,\n      clearSearch: function clearSearch() {\n        setDisplay(false);\n        setSearch('');\n        setProducts([]);\n        Router.push(\"/shop/\".concat(product.title.replace(/ /g, '-')));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }\n    })));\n  }) : __jsx(SubMenu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, \"No records found\"))));\n\n  var filterProducts = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n      var res, productList, visibleProducts, newList, productsRow, applySearch;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSearch(value);\n\n              if (!(value === '')) {\n                _context.next = 5;\n                break;\n              }\n\n              setDisplay(false);\n              setProducts([]);\n              return _context.abrupt(\"return\");\n\n            case 5:\n              setDisplay(true);\n              _context.next = 8;\n              return fetch(apiList.getAllProducts);\n\n            case 8:\n              res = _context.sent;\n              _context.next = 11;\n              return res.json();\n\n            case 11:\n              productList = _context.sent;\n              visibleProducts = getVisibleProducts(productList.products);\n              newList = visibleProducts.map(function (el) {\n                return addSlugToProduct(el);\n              });\n              productsRow = newList.map(function (el) {\n                return _objectSpread(_objectSpread({}, el), {}, {\n                  image: el.productImage ? projectSettings.serverUrl + el.productImage : '//via.placeholder.com/300x500',\n                  title: getProductTitle(el),\n                  subTitle: getProductShortDesc(el),\n                  price: getBasicPrice(el),\n                  qty: 1\n                });\n              });\n              applySearch = productsRow.filter(function (el) {\n                if (value === '') return false;\n                return el.title.toLowerCase().includes(value.toLowerCase());\n              }); // console.log(applySearch);\n\n              setProducts(applySearch);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function filterProducts(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"ul\", {\n    className: \"c-nav__list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, items.filter(function (el) {\n    console.log(el);\n\n    if (user._id) {\n      return el.onlyLogin !== false;\n    } else {\n      return el.onlyLogin !== true;\n    }\n  }).map(function (el, ind) {\n    return __jsx(\"li\", {\n      key: ind,\n      className: classNames('c-nav__list-item', {\n        'c-nav__list-item--has-sub-menu': el.subMenus\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, el.action === 'input' ? __jsx(\"div\", {\n      style: {\n        position: 'relative'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, __jsx(Input, {\n      prefix: __jsx(SearchOutlined, {\n        style: {\n          color: '#aaaaaa'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 27\n        }\n      }),\n      value: search,\n      onChange: function onChange(e) {\n        return filterProducts(e.target.value);\n      },\n      onKeyDown: onSubmit,\n      label: \"Search\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }), __jsx(Dropdown, {\n      overlayStyle: {\n        position: 'absolute',\n        top: '0 !important',\n        left: '0 !important',\n        width: '400px',\n        height: '500px',\n        overflow: 'scroll'\n      },\n      visible: display // visible={true}\n      ,\n      onVisibleChange: function onVisibleChange() {\n        return setDisplay(!display);\n      },\n      overlay: menu,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, __jsx(\"a\", {\n      className: \"ant-dropdown-link\",\n      onClick: function onClick(e) {\n        return e.preventDefault();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 19\n      }\n    }))) : '', el.link ? __jsx(Link, {\n      as: el.as || el.link,\n      href: el.link,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    }, __jsx(\"a\", {\n      onClick: el.action,\n      className: \"c-nav__link\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }, el.label, el.icon)) : __jsx(\"span\", {\n      onClick: el.action,\n      className: \"c-nav__link\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, el.label, el.icon), el.subMenus && __jsx(\"ul\", {\n      className: \"c-nav__sub-menu\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }, el.subMenus.map(function (elx, i) {\n      return __jsx(\"li\", {\n        key: i,\n        className: \"c-nav__sub-menu-item\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 19\n        }\n      }, __jsx(Link, {\n        as: elx.as || elx.link,\n        href: elx.link,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }\n      }, __jsx(\"a\", {\n        className: \"c-nav__link c-nav__link--sub\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 23\n        }\n      }, elx.label)));\n    })));\n  }));\n};\n\n_s(MobileMenu, \"IfBDIxmiYZQub29PR4FbtzTy2Mo=\");\n\n_c = MobileMenu;\nMobileMenu.defaultProps = {\n  items: []\n};\nexport default MobileMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"MobileMenu\");","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/components/MobileMenus.js"],"names":["React","useState","connect","Link","classNames","Menu","Dropdown","Input","SearchOutlined","apiList","getVisibleProducts","addSlugToProduct","getProductTitle","getProductShortDesc","getBasicPrice","projectSettings","CartItem","numberFormat","SubMenu","MobileMenu","items","user","toggleCartBar","toggleRegBar","isOpen","setOpen","search","setSearch","display","setDisplay","products","setProducts","onSubmit","e","key","Router","push","menu","marginTop","length","map","product","i","height","title","image","totalcbdmg","parseFloat","price","sale_price","replace","filterProducts","value","fetch","getAllProducts","res","json","productList","visibleProducts","newList","el","productsRow","productImage","serverUrl","subTitle","qty","applySearch","filter","toLowerCase","includes","console","log","_id","onlyLogin","ind","subMenus","action","position","color","target","top","left","width","overflow","preventDefault","link","as","label","icon","elx","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport classNames from 'classnames';\nimport './styles/app.scss';\nimport { Menu, Dropdown } from 'antd';\nimport Input from './form-components/Input';\nimport { SearchOutlined } from '@ant-design/icons';\nimport apiList from '../services/apis/apiList';\nimport {\n  getVisibleProducts,\n  addSlugToProduct,\n  getProductTitle,\n  getProductShortDesc,\n  getBasicPrice,\n} from '../services/helpers/product';\nimport projectSettings from '../constants/projectSettings';\nimport CartItem from './CartItem';\nimport { numberFormat } from '../services/helpers/misc';\nconst { SubMenu } = Menu;\nconst MobileMenu = ({ items, user, toggleCartBar, toggleRegBar }) => {\n  const [isOpen, setOpen] = useState(false);\n  const [search, setSearch] = useState('');\n  const [display, setDisplay] = useState(false);\n  const [products, setProducts] = useState([]);\n  const onSubmit = (e) => {\n    //console.log(`${window.location.origin}/search/${search}`);\n    // window.location.href(`${window.location.origin}/search/${search}`)\n    if (e.key === 'Enter') {\n      Router.push(`/search/${search}`);\n    }\n  };\n  const menu = (\n    <div className=\"search-container\">\n      <Menu>\n        <div style={{ marginTop: '40px' }}></div>\n        {products.length > 0 ? (\n          products.map((product, i) => (\n            <Menu.Item style={{ height: 'fit-content' }} key={i}>\n              <div className=\"c-cart-drawer\">\n                <CartItem\n                  key={i}\n                  title={product.title}\n                  image={product.image}\n                  subTitle={product.totalcbdmg}\n                  price={`$${numberFormat(\n                    parseFloat(product.price.sale_price)\n                  )}`}\n                  isSearch={true}\n                  clearSearch={() => {\n                    setDisplay(false);\n                    setSearch('');\n                    setProducts([]);\n                    Router.push(`/shop/${product.title.replace(/ /g, '-')}`);\n                  }}\n                />\n              </div>\n            </Menu.Item>\n          ))\n        ) : (\n          <SubMenu>\n            <h2>No records found</h2>\n          </SubMenu>\n        )}\n      </Menu>\n    </div>\n  );\n  const filterProducts = async (value) => {\n    setSearch(value);\n    if (value === '') {\n      setDisplay(false);\n      setProducts([]);\n      return;\n    }\n    setDisplay(true);\n    const res = await fetch(apiList.getAllProducts);\n    const productList = await res.json();\n    const visibleProducts = getVisibleProducts(productList.products);\n    const newList = visibleProducts.map((el) => addSlugToProduct(el));\n    const productsRow = newList.map((el) => {\n      return {\n        ...el,\n        image: el.productImage\n          ? projectSettings.serverUrl + el.productImage\n          : '//via.placeholder.com/300x500',\n        title: getProductTitle(el),\n        subTitle: getProductShortDesc(el),\n        price: getBasicPrice(el),\n        qty: 1,\n      };\n    });\n    const applySearch = productsRow.filter((el) => {\n      if (value === '') return false;\n      return el.title.toLowerCase().includes(value.toLowerCase());\n    });\n    // console.log(applySearch);\n    setProducts(applySearch);\n  };\n\n  return (\n    <ul className=\"c-nav__list\">\n      {items\n        .filter((el) => {\n          console.log(el);\n          if (user._id) {\n            return el.onlyLogin !== false;\n          } else {\n            return el.onlyLogin !== true;\n          }\n        })\n        .map((el, ind) => (\n          <li\n            key={ind}\n            className={classNames('c-nav__list-item', {\n              'c-nav__list-item--has-sub-menu': el.subMenus,\n            })}\n          >\n            {el.action === 'input' ? (\n              <div style={{ position: 'relative' }}>\n                <Input\n                  prefix={<SearchOutlined style={{ color: '#aaaaaa' }} />}\n                  value={search}\n                  onChange={(e) => filterProducts(e.target.value)}\n                  onKeyDown={onSubmit}\n                  label=\"Search\"\n                />\n                {/* {display ? ( */}\n                <Dropdown\n                  overlayStyle={{\n                    position: 'absolute',\n                    top: '0 !important',\n                    left: '0 !important',\n                    width: '400px',\n                    height: '500px',\n                    overflow: 'scroll',\n                  }}\n                  visible={display}\n                  // visible={true}\n                  onVisibleChange={() => setDisplay(!display)}\n                  overlay={menu}\n                >\n                  <a\n                    className=\"ant-dropdown-link\"\n                    onClick={(e) => e.preventDefault()}\n                  ></a>\n                </Dropdown>\n                {/* ) : null} */}\n              </div>\n            ) : (\n              ''\n            )}\n            {el.link ? (\n              <Link as={el.as || el.link} href={el.link}>\n                <a onClick={el.action} className=\"c-nav__link\">\n                  {el.label}\n                  {el.icon}\n                </a>\n              </Link>\n            ) : (\n              <span onClick={el.action} className=\"c-nav__link\">\n                {el.label}\n                {el.icon}\n              </span>\n            )}\n            {/* {\n                el.subMenus && <span onClick={() => setOpen(!isOpen)} className={classNames(\"c-nav__sub-menu-tgl\", {\n                  \"c-nav__sub-menu-tgl--opened\": isOpen\n                })}>{isOpen ? <FiMinus /> : <FiPlus />}</span>\n              } */}\n            {el.subMenus && (\n              <ul className=\"c-nav__sub-menu\">\n                {el.subMenus.map((elx, i) => (\n                  <li key={i} className=\"c-nav__sub-menu-item\">\n                    <Link as={elx.as || elx.link} href={elx.link}>\n                      <a className=\"c-nav__link c-nav__link--sub\">\n                        {elx.label}\n                      </a>\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </li>\n        ))}\n    </ul>\n  );\n};\n\nMobileMenu.defaultProps = {\n  items: [],\n};\n\nexport default MobileMenu;\n"]},"metadata":{},"sourceType":"module"}