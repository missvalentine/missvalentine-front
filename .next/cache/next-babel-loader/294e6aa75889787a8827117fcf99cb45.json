{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missnew front/components/MobileMenus.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport classNames from 'classnames';\nimport './styles/app.scss';\nimport { toggleCartBar, hideCartBar, toggleRegBar } from '../redux/actions/drawers';\nimport { unsetUser } from '../redux/actions/user';\nimport { Menu, Dropdown } from 'antd';\nimport Input from './form-components/Input';\nimport CartIcon from './CartIcon';\nimport { SearchOutlined } from '@ant-design/icons';\nimport apiList from '../services/apis/apiList';\nimport { getVisibleProducts, addSlugToProduct, getProductTitle, getProductShortDesc, getBasicPrice } from '../services/helpers/product';\nimport projectSettings from '../constants/projectSettings';\nimport CartItem from './CartItem';\nimport { numberFormat } from '../services/helpers/misc';\nvar SubMenu = Menu.SubMenu;\n\nvar MobileMenu = function MobileMenu(_ref) {\n  _s();\n\n  var items = _ref.items,\n      user = _ref.user,\n      toggleCartBar = _ref.toggleCartBar,\n      toggleRegBar = _ref.toggleRegBar;\n\n  var _useState = useState(false),\n      isOpen = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState(''),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var _useState3 = useState(false),\n      display = _useState3[0],\n      setDisplay = _useState3[1];\n\n  var _useState4 = useState([]),\n      products = _useState4[0],\n      setProducts = _useState4[1];\n\n  var onSubmit = function onSubmit(e) {\n    //console.log(`${window.location.origin}/search/${search}`);\n    // window.location.href(`${window.location.origin}/search/${search}`)\n    if (e.key === 'Enter') {\n      Router.push(\"/search/\".concat(search));\n    }\n  };\n\n  var menu = __jsx(\"div\", {\n    className: \"search-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, __jsx(Menu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    style: {\n      marginTop: '40px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }), products.length > 0 ? products.map(function (product, i) {\n    return __jsx(Menu.Item, {\n      style: {\n        height: 'fit-content'\n      },\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"c-cart-drawer\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 15\n      }\n    }, __jsx(CartItem, {\n      key: i,\n      title: product.title,\n      image: product.image,\n      subTitle: product.totalcbdmg,\n      price: \"$\".concat(numberFormat(parseFloat(product.price.sale_price))),\n      isSearch: true,\n      clearSearch: function clearSearch() {\n        setDisplay(false);\n        setSearch('');\n        setProducts([]);\n        Router.push(\"/shop/\".concat(product.title.replace(/ /g, '-')));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }\n    })));\n  }) : __jsx(SubMenu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, \"No records found\"))));\n\n  var filterProducts = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n      var res, productList, visibleProducts, newList, productsRow, applySearch;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSearch(value);\n\n              if (!(value === '')) {\n                _context.next = 5;\n                break;\n              }\n\n              setDisplay(false);\n              setProducts([]);\n              return _context.abrupt(\"return\");\n\n            case 5:\n              setDisplay(true);\n              _context.next = 8;\n              return fetch(apiList.getAllProducts);\n\n            case 8:\n              res = _context.sent;\n              _context.next = 11;\n              return res.json();\n\n            case 11:\n              productList = _context.sent;\n              visibleProducts = getVisibleProducts(productList.products);\n              newList = visibleProducts.map(function (el) {\n                return addSlugToProduct(el);\n              });\n              productsRow = newList.map(function (el) {\n                return _objectSpread(_objectSpread({}, el), {}, {\n                  image: el.productImage ? projectSettings.serverUrl + el.productImage : '//via.placeholder.com/300x500',\n                  title: getProductTitle(el),\n                  subTitle: getProductShortDesc(el),\n                  price: getBasicPrice(el),\n                  qty: 1\n                });\n              });\n              applySearch = productsRow.filter(function (el) {\n                if (value === '') return false;\n                return el.title.toLowerCase().includes(value.toLowerCase());\n              }); // console.log(applySearch);\n\n              setProducts(applySearch);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function filterProducts(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _onClick = function onClick(e, action) {\n    if (action === \"link\") {}\n\n    if (action === \"cart\") {\n      toggleCartBar(); // setIsCartOpen(!isCartOpen)\n    }\n\n    if (action === \"reg\") {\n      toggleRegBar();\n    }\n\n    if (action === \"logout\") {\n      unsetUser();\n    }\n  };\n\n  return __jsx(\"ul\", {\n    className: \"c-nav__list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, items.filter(function (el) {\n    console.log(el);\n\n    if (user._id) {\n      return el.onlyLogin !== false;\n    } else {\n      return el.onlyLogin !== true;\n    }\n  }).map(function (el, ind) {\n    return __jsx(\"li\", {\n      key: ind,\n      className: classNames(\"c-nav__list-item\", {\n        \"c-nav__list-item--has-sub-menu\": el.subMenus\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 31\n      }\n    }, el.action === 'input' ? __jsx(\"div\", {\n      style: {\n        position: 'relative'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }, __jsx(Input, {\n      prefix: __jsx(SearchOutlined, {\n        style: {\n          color: '#aaaaaa'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 37\n        }\n      }),\n      value: search,\n      onChange: function onChange(e) {\n        return filterProducts(e.target.value);\n      },\n      onKeyDown: onSubmit,\n      label: \"Search\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 27\n      }\n    }), __jsx(Dropdown, {\n      overlayStyle: {\n        position: 'absolute',\n        top: '0 !important',\n        left: '0 !important',\n        width: '400px',\n        height: '500px',\n        overflow: 'scroll'\n      },\n      visible: display // visible={true}\n      ,\n      onVisibleChange: function onVisibleChange() {\n        return setDisplay(!display);\n      },\n      overlay: menu,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 27\n      }\n    }, __jsx(\"a\", {\n      className: \"ant-dropdown-link\",\n      onClick: function onClick(e) {\n        return e.preventDefault();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 29\n      }\n    }))) : \"\", el.link ? __jsx(Link, {\n      as: el.as || el.link,\n      href: el.link,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }\n    }, __jsx(\"a\", {\n      onClick: function onClick(e) {\n        _onClick(e, el.action);\n      },\n      className: \"c-nav__link\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, el.label, el.icon)) : __jsx(\"span\", {\n      onClick: function onClick(e) {\n        _onClick(e, el.action);\n      },\n      className: \"c-nav__link\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }\n    }, el.label, el.icon), el.subMenus && __jsx(\"ul\", {\n      className: \"c-nav__sub-menu\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 30\n      }\n    }, el.subMenus.map(function (elx, i) {\n      return __jsx(\"li\", {\n        key: i,\n        className: \"c-nav__sub-menu-item\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }\n      }, __jsx(Link, {\n        as: elx.as || elx.link,\n        href: elx.link,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 23\n        }\n      }, __jsx(\"a\", {\n        className: \"c-nav__link c-nav__link--sub\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 25\n        }\n      }, elx.label)));\n    })));\n  }));\n};\n\n_s(MobileMenu, \"IfBDIxmiYZQub29PR4FbtzTy2Mo=\");\n\n_c = MobileMenu;\nMobileMenu.defaultProps = {\n  items: []\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isCartOpen: state.drawers.isCartOpen,\n    isRegOpen: state.drawers.isRegOpen,\n    hasLogin: state.drawers.hasLogin,\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  toggleCartBar: toggleCartBar,\n  hideCartBar: hideCartBar,\n  toggleRegBar: toggleRegBar,\n  unsetUser: unsetUser\n})(MobileMenu);\n\nvar _c;\n\n$RefreshReg$(_c, \"MobileMenu\");","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missnew front/components/MobileMenus.js"],"names":["React","useState","connect","Link","classNames","toggleCartBar","hideCartBar","toggleRegBar","unsetUser","Menu","Dropdown","Input","CartIcon","SearchOutlined","apiList","getVisibleProducts","addSlugToProduct","getProductTitle","getProductShortDesc","getBasicPrice","projectSettings","CartItem","numberFormat","SubMenu","MobileMenu","items","user","isOpen","setOpen","search","setSearch","display","setDisplay","products","setProducts","onSubmit","e","key","Router","push","menu","marginTop","length","map","product","i","height","title","image","totalcbdmg","parseFloat","price","sale_price","replace","filterProducts","value","fetch","getAllProducts","res","json","productList","visibleProducts","newList","el","productsRow","productImage","serverUrl","subTitle","qty","applySearch","filter","toLowerCase","includes","onClick","action","console","log","_id","onlyLogin","ind","subMenus","position","color","target","top","left","width","overflow","preventDefault","link","as","label","icon","elx","defaultProps","mapStateToProps","state","isCartOpen","drawers","isRegOpen","hasLogin"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport Link from 'next/link'\nimport classNames from 'classnames'\nimport './styles/app.scss'\nimport { toggleCartBar, hideCartBar, toggleRegBar } from '../redux/actions/drawers'\nimport { unsetUser } from '../redux/actions/user'\nimport { Menu, Dropdown } from 'antd';\nimport Input from './form-components/Input';\nimport CartIcon from './CartIcon';\nimport { SearchOutlined } from '@ant-design/icons';\nimport apiList from '../services/apis/apiList';\nimport {\n  getVisibleProducts,\n  addSlugToProduct,\n  getProductTitle,\n  getProductShortDesc,\n  getBasicPrice,\n} from '../services/helpers/product';\nimport projectSettings from '../constants/projectSettings';\nimport CartItem from './CartItem';\nimport { numberFormat } from '../services/helpers/misc';\nconst { SubMenu } = Menu;\nconst MobileMenu = ({items, user, toggleCartBar, toggleRegBar }) => {\n\n  const [isOpen, setOpen] = useState(false)\n  const [search, setSearch] = useState('');\n  const [display, setDisplay] = useState(false);\n  const [products, setProducts] = useState([]);\n  const onSubmit = (e) => {\n    //console.log(`${window.location.origin}/search/${search}`);\n    // window.location.href(`${window.location.origin}/search/${search}`)\n    if (e.key === 'Enter') {\n      Router.push(`/search/${search}`);\n    }\n  };\n  const menu = (\n    <div className=\"search-container\">\n      <Menu>\n        <div style={{ marginTop: '40px' }}></div>\n        {products.length > 0 ? (\n          products.map((product, i) => (\n            <Menu.Item style={{ height: 'fit-content' }} key={i}>\n              <div className=\"c-cart-drawer\">\n                <CartItem\n                  key={i}\n                  title={product.title}\n                  image={product.image}\n                  subTitle={product.totalcbdmg}\n                  price={`$${numberFormat(\n                    parseFloat(product.price.sale_price)\n                  )}`}\n                  isSearch={true}\n                  clearSearch={() => {\n                    setDisplay(false);\n                    setSearch('');\n                    setProducts([]);\n                    Router.push(`/shop/${product.title.replace(/ /g, '-')}`);\n                  }}\n                />\n              </div>\n            </Menu.Item>\n          ))\n        ) : (\n          <SubMenu>\n            <h2>No records found</h2>\n          </SubMenu>\n        )}\n      </Menu>\n    </div>\n  );\n  const filterProducts = async (value) => {\n    setSearch(value);\n    if (value === '') {\n      setDisplay(false);\n      setProducts([]);\n      return;\n    }\n    setDisplay(true);\n    const res = await fetch(apiList.getAllProducts);\n    const productList = await res.json();\n    const visibleProducts = getVisibleProducts(productList.products);\n    const newList = visibleProducts.map((el) => addSlugToProduct(el));\n    const productsRow = newList.map((el) => {\n      return {\n        ...el,\n        image: el.productImage\n          ? projectSettings.serverUrl + el.productImage\n          : '//via.placeholder.com/300x500',\n        title: getProductTitle(el),\n        subTitle: getProductShortDesc(el),\n        price: getBasicPrice(el),\n        qty: 1,\n      };\n    });\n    const applySearch = productsRow.filter((el) => {\n      if (value === '') return false;\n      return el.title.toLowerCase().includes(value.toLowerCase());\n    });\n    // console.log(applySearch);\n    setProducts(applySearch);\n  };\n    const onClick = (e, action) => {\n        if (action === \"link\") {\n    \n        }\n        if (action === \"cart\") {\n          toggleCartBar();\n          // setIsCartOpen(!isCartOpen)\n        }\n        if (action === \"reg\") {\n          toggleRegBar()\n        }\n        if (action === \"logout\") {\n          unsetUser()\n        }\n      }\n\n\n    return  (\n    <ul className=\"c-nav__list\">\n          {items.filter(el => {\n            console.log(el);\n            if (user._id) {\n              return el.onlyLogin !== false\n            } else {\n              return el.onlyLogin !== true\n            }\n          }).map((el, ind) => <li \n         \n          key={ind} className={classNames(\"c-nav__list-item\", {\n            \"c-nav__list-item--has-sub-menu\": el.subMenus\n          })}>\n            \n            {/* <div  onClick={()={\n                    }}  className=\"c-nav__list-item-inner\"> */}\n                    {\n                      el.action === 'input' ? (\n                        <div style={{ position: 'relative' }}>\n                          <Input\n                            prefix={<SearchOutlined style={{ color: '#aaaaaa' }} />}\n                            value={search}\n                            onChange={(e) => filterProducts(e.target.value)}\n                            onKeyDown={onSubmit}\n                            label=\"Search\"\n                          />\n                          {/* {display ? ( */}\n                          <Dropdown\n                            overlayStyle={{\n                              position: 'absolute',\n                              top: '0 !important',\n                              left: '0 !important',\n                              width: '400px',\n                              height: '500px',\n                              overflow: 'scroll',\n                            }}\n                            visible={display}\n                            // visible={true}\n                            onVisibleChange={() => setDisplay(!display)}\n                            overlay={menu}\n                          >\n                            <a\n                              className=\"ant-dropdown-link\"\n                              onClick={(e) => e.preventDefault()}\n                            ></a>\n                          </Dropdown>\n                          {/* ) : null} */}\n                        </div>\n                      ) : \"\"\n                    }\n              {\n                el.link ?\n                  <Link as={el.as || el.link} href={el.link}>\n                    <a onClick={(e) => {\n                      onClick(e, el.action)\n                    }} className=\"c-nav__link\">\n                      {el.label}\n                      {el.icon}\n                    </a>\n                  </Link>\n                  : (\n                    <span onClick={(e) => {\n                        onClick(e, el.action)\n                      }} className=\"c-nav__link\">\n                        {el.label}\n                        {el.icon}\n                      </span>)\n              }  \n              {/* {\n                el.subMenus && <span onClick={() => setOpen(!isOpen)} className={classNames(\"c-nav__sub-menu-tgl\", {\n                  \"c-nav__sub-menu-tgl--opened\": isOpen\n                })}>{isOpen ? <FiMinus /> : <FiPlus />}</span>\n              } */}\n            {\n              el.subMenus && <ul className=\"c-nav__sub-menu\">\n                  \n                {el.subMenus.map((elx, i) =>\n                    <li key={i} className=\"c-nav__sub-menu-item\">\n                      <Link as={elx.as || elx.link} href={elx.link}>\n                        <a className=\"c-nav__link c-nav__link--sub\">\n                          {elx.label}\n                        </a>\n                      </Link>\n                    </li>\n                )}\n              </ul>\n            }\n          </li>)}\n          \n        </ul>\n    )\n}\n\nMobileMenu.defaultProps = {\n    items: []\n  }\n\n  const mapStateToProps = state => ({\n    isCartOpen: state.drawers.isCartOpen,\n    isRegOpen: state.drawers.isRegOpen,\n    hasLogin: state.drawers.hasLogin,\n    user: state.user\n  })\n\n\n\nexport default connect(mapStateToProps, { toggleCartBar, hideCartBar, toggleRegBar, unsetUser })(MobileMenu)\n "]},"metadata":{},"sourceType":"module"}