{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/pages/e-catalogue.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport dynamic from 'next/dynamic';\nimport '../components/styles/pages/_catalogue.scss';\nvar Layout = dynamic(_c = function _c() {\n  return import('../components/Layouts/Layout');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../components/Layouts/Layout')];\n    },\n    modules: ['../components/Layouts/Layout']\n  }\n});\n_c2 = Layout;\nvar Heading = dynamic(_c3 = function _c3() {\n  return import('../components/Heading');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../components/Heading')];\n    },\n    modules: ['../components/Heading']\n  }\n});\n_c4 = Heading;\nimport { getCategories, getProducts } from '../redux/actions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Select, Input, Button, Modal } from 'antd';\nimport { getSubcategory, createContact } from '../services/apis/admin.js';\nimport { Fade } from 'reactstrap';\nimport Product from '../components/Product.js';\nvar Option = Select.Option;\nexport default function ECatalogue() {\n  _s();\n\n  var _this = this;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState({\n    name: '',\n    storeName: '',\n    phoneNumber: '',\n    address: '',\n    city: '',\n    state: '',\n    category: {},\n    subCategory: {}\n  }),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState([]),\n      selectableProducts = _useState2[0],\n      setSelectableProducts = _useState2[1];\n\n  var _useState3 = useState([]),\n      selectedProducts = _useState3[0],\n      setSelectedProducts = _useState3[1];\n\n  var _useState4 = useState(false),\n      showSubCate = _useState4[0],\n      setShowSubCate = _useState4[1];\n\n  function handleCategoryChange(v) {\n    setValue(_objectSpread(_objectSpread({}, value), {}, {\n      category: v,\n      subCategory: {}\n    }));\n    var isSubCateExist = Object.keys(v.subcategories).length !== 0;\n\n    if (isSubCateExist) {\n      var isSubCateWithProductExist = v.subcategories.filter(function (sCate) {\n        return sCate.products.length > 0;\n      }).length > 0;\n      if (isSubCateWithProductExist) setShowSubCate(true);else setShowSubCate(false);\n    } else setShowSubCate(false);\n  }\n\n  function handleSubCategoryChange(v) {\n    setValue(_objectSpread(_objectSpread({}, value), {}, {\n      subCategory: v\n    }));\n  }\n\n  var products = useSelector(function (state) {\n    return state.products;\n  });\n  useEffect(function () {\n    dispatch(getCategories());\n  }, []);\n\n  var handleLoadProducts = function handleLoadProducts() {\n    if (value.subCategory._id) {\n      getSubcategory(value.subCategory._id).then(function (res) {\n        setSelectableProducts(res.data.products);\n      })[\"catch\"](function (err) {\n        return setSelectableProducts(value.category.products);\n      });\n    } else {\n      setSelectableProducts(value.category.products);\n    }\n  };\n\n  var handleSelectClick = function handleSelectClick(data) {\n    var tempSelectedProducts = _toConsumableArray(selectedProducts);\n\n    var isSelected = selectedProducts.filter(function (prd) {\n      return prd._id === data._id;\n    }).length > 0;\n    console.log('isSelected', isSelected);\n\n    if (isSelected) {\n      tempSelectedProducts = tempSelectedProducts.filter(function (prd) {\n        return prd._id !== data._id;\n      });\n    } else {\n      tempSelectedProducts.push(data);\n    }\n\n    console.log('tempSelectedProducts', tempSelectedProducts);\n    setSelectedProducts(tempSelectedProducts);\n  };\n\n  var handleSendEnquiry = function handleSendEnquiry() {\n    var contactData = {\n      name: value.name,\n      storeName: value.storeName,\n      phoneNumber: value.phoneNumber,\n      address: value.address,\n      city: value.city,\n      state: value.state,\n      products: selectedProducts\n    };\n    console.log('contactData', contactData); // createContact(contactData);\n\n    Modal.success({\n      title: 'Enquiry Request Registered Successfully!'\n    });\n  };\n\n  return __jsx(Layout, {\n    headerVersions: ['bg-dark'],\n    headerTheme: \"black\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"c-catalogue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, __jsx(Heading, {\n    versions: ['shop-all'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, 'Enquiry Form'), __jsx(\"div\", {\n    className: \"c-catalogue__options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \" row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, \"Name\"), __jsx(Input, {\n    placeholder: \"Enter your name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, \"Store Name\"), __jsx(Input, {\n    placeholder: \"Enter your store name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, \"Phone Number\"), __jsx(Input, {\n    placeholder: \"Enter your phone no\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    className: \" row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, \"Address\"), __jsx(Input, {\n    placeholder: \"Enter your address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }, \"City\"), __jsx(Input, {\n    placeholder: \"Enter your city\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, \"State\"), __jsx(Input, {\n    placeholder: \"Enter your state\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    className: \" row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, \"Category\"), __jsx(Select, {\n    value: value.category.name,\n    onChange: handleCategoryChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, products.categories.map(function (cate) {\n    return __jsx(Option, {\n      key: cate._id,\n      value: cate,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 19\n      }\n    }, cate.name);\n  }))), value.category !== {} && showSubCate && value.category.subcategories && __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 19\n    }\n  }, \"Sub Category (Optional)\"), __jsx(Select, {\n    value: value.subCategory.name,\n    onChange: handleSubCategoryChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  }, value.category.subcategories.filter(function (sCate) {\n    return sCate.products.length > 0;\n  }).map(function (sCate) {\n    return __jsx(Option, {\n      key: sCate._id,\n      value: sCate,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }\n    }, sCate.name);\n  })))), __jsx(\"div\", {\n    className: \"row load-btn-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }, __jsx(Button, {\n    className: \"load-btn\",\n    onClick: handleLoadProducts,\n    disabled: !value.category.products,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, \"Load Products\"))), selectedProducts.length !== 0 && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"c-catalogue__products c-catalogue__products-selected row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, __jsx(Heading, {\n    className: \"col-12 my-2\",\n    versions: ['shop-all'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 15\n    }\n  }, 'Selected Products'), selectedProducts.map(function (el, i) {\n    return __jsx(\"div\", {\n      key: el._id,\n      className: \"col-lg-4 col-md-6 my-3\",\n      style: {\n        padding: '0 40px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, __jsx(Fade, {\n      key: el._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }\n    }, __jsx(Product, {\n      data: el,\n      isSelectable: true,\n      isSelected: selectedProducts.filter(function (prd) {\n        return prd._id === el._id;\n      }).length > 0,\n      handleSelectClick: handleSelectClick,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    })));\n  }), __jsx(\"div\", {\n    className: \"col-12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    className: \"\",\n    onClick: handleSendEnquiry,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }, \"Send Enquiry\")))), __jsx(\"div\", {\n    className: \"c-catalogue__products row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, selectableProducts.length !== 0 && selectableProducts.map(function (el, i) {\n    return __jsx(\"div\", {\n      key: el._id,\n      className: \"col-lg-4 col-md-6 my-3\",\n      style: {\n        padding: '0 40px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }, __jsx(Fade, {\n      key: el._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }, __jsx(Product, {\n      data: el,\n      isSelectable: true,\n      isSelected: selectedProducts.filter(function (prd) {\n        return prd._id === el._id;\n      }).length > 0,\n      handleSelectClick: handleSelectClick,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 19\n      }\n    })));\n  }))));\n}\n\n_s(ECatalogue, \"Y+Pv0QTGpTV69ayiilwN2vApjdw=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c5 = ECatalogue;\n\nECatalogue.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var res, json;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch('https://api.github.com/repos/vercel/next.js');\n\n          case 2:\n            res = _context.sent;\n            _context.next = 5;\n            return res.json();\n\n          case 5:\n            json = _context.sent;\n            return _context.abrupt(\"return\", {\n              stars: json.stargazers_count\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Layout$dynamic\");\n$RefreshReg$(_c2, \"Layout\");\n$RefreshReg$(_c3, \"Heading$dynamic\");\n$RefreshReg$(_c4, \"Heading\");\n$RefreshReg$(_c5, \"ECatalogue\");","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/pages/e-catalogue.js"],"names":["React","useState","useEffect","dynamic","Layout","ssr","Heading","getCategories","getProducts","useSelector","useDispatch","Select","Input","Button","Modal","getSubcategory","createContact","Fade","Product","Option","ECatalogue","dispatch","name","storeName","phoneNumber","address","city","state","category","subCategory","value","setValue","selectableProducts","setSelectableProducts","selectedProducts","setSelectedProducts","showSubCate","setShowSubCate","handleCategoryChange","v","isSubCateExist","Object","keys","subcategories","length","isSubCateWithProductExist","filter","sCate","products","handleSubCategoryChange","handleLoadProducts","_id","then","res","data","err","handleSelectClick","tempSelectedProducts","isSelected","prd","console","log","push","handleSendEnquiry","contactData","success","title","categories","map","cate","el","i","padding","getInitialProps","ctx","fetch","json","stars","stargazers_count"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport dynamic from 'next/dynamic';\nimport '../components/styles/pages/_catalogue.scss';\nconst Layout = dynamic(() => import('../components/Layouts/Layout'), {\n  ssr: false,\n});\nconst Heading = dynamic(() => import('../components/Heading'), {\n  ssr: false,\n});\nimport { getCategories, getProducts } from '../redux/actions';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { Select, Input, Button, Modal } from 'antd';\nimport { getSubcategory, createContact } from '../services/apis/admin.js';\nimport { Fade } from 'reactstrap';\nimport Product from '../components/Product.js';\n\nconst { Option } = Select;\n\nexport default function ECatalogue() {\n  const dispatch = useDispatch();\n  const [value, setValue] = useState({\n    name: '',\n    storeName: '',\n    phoneNumber: '',\n    address: '',\n    city: '',\n    state: '',\n    category: {},\n    subCategory: {},\n  });\n  const [selectableProducts, setSelectableProducts] = useState([]);\n  const [selectedProducts, setSelectedProducts] = useState([]);\n\n  const [showSubCate, setShowSubCate] = useState(false);\n\n  function handleCategoryChange(v) {\n    setValue({ ...value, category: v, subCategory: {} });\n    const isSubCateExist = Object.keys(v.subcategories).length !== 0;\n    if (isSubCateExist) {\n      const isSubCateWithProductExist =\n        v.subcategories.filter((sCate) => sCate.products.length > 0).length > 0;\n      if (isSubCateWithProductExist) setShowSubCate(true);\n      else setShowSubCate(false);\n    } else setShowSubCate(false);\n  }\n\n  function handleSubCategoryChange(v) {\n    setValue({ ...value, subCategory: v });\n  }\n\n  const products = useSelector((state) => state.products);\n\n  useEffect(() => {\n    dispatch(getCategories());\n  }, []);\n\n  const handleLoadProducts = () => {\n    if (value.subCategory._id) {\n      getSubcategory(value.subCategory._id)\n        .then((res) => {\n          setSelectableProducts(res.data.products);\n        })\n        .catch((err) => setSelectableProducts(value.category.products));\n    } else {\n      setSelectableProducts(value.category.products);\n    }\n  };\n\n  const handleSelectClick = (data) => {\n    let tempSelectedProducts = [...selectedProducts];\n    const isSelected =\n      selectedProducts.filter((prd) => prd._id === data._id).length > 0;\n    console.log('isSelected', isSelected);\n    if (isSelected) {\n      tempSelectedProducts = tempSelectedProducts.filter(\n        (prd) => prd._id !== data._id\n      );\n    } else {\n      tempSelectedProducts.push(data);\n    }\n    console.log('tempSelectedProducts', tempSelectedProducts);\n\n    setSelectedProducts(tempSelectedProducts);\n  };\n\n  const handleSendEnquiry = () => {\n    const contactData = {\n      name: value.name,\n      storeName: value.storeName,\n      phoneNumber: value.phoneNumber,\n      address: value.address,\n      city: value.city,\n      state: value.state,\n      products: selectedProducts,\n    };\n    console.log('contactData', contactData);\n    // createContact(contactData);\n    Modal.success({\n      title: 'Enquiry Request Registered Successfully!',\n    });\n  };\n\n  return (\n    <Layout headerVersions={['bg-dark']} headerTheme=\"black\">\n      <div className=\"c-catalogue\">\n        <Heading versions={['shop-all']}>{'Enquiry Form'}</Heading>\n        <div className=\"c-catalogue__options\">\n          <div className=\" row\">\n            <div className=\"col-12 col-lg-4 \">\n              <p>Name</p>\n              <Input placeholder=\"Enter your name\" />\n            </div>\n            <div className=\"col-12 col-lg-4 \">\n              <p>Store Name</p>\n              <Input placeholder=\"Enter your store name\" />\n            </div>\n            <div className=\"col-12 col-lg-4 \">\n              <p>Phone Number</p>\n\n              <Input placeholder=\"Enter your phone no\" />\n            </div>\n          </div>\n          <div className=\" row\">\n            <div className=\"col-12 col-lg-4 \">\n              <p>Address</p>\n              <Input placeholder=\"Enter your address\" />\n            </div>\n            <div className=\"col-12 col-lg-4 \">\n              <p>City</p>\n              <Input placeholder=\"Enter your city\" />\n            </div>\n            <div className=\"col-12 col-lg-4 \">\n              <p>State</p>\n              <Input placeholder=\"Enter your state\" />\n            </div>\n          </div>\n          <div className=\" row\">\n            <div className=\"col-12 col-lg-4 \">\n              <p>Category</p>\n              <Select\n                value={value.category.name}\n                onChange={handleCategoryChange}\n              >\n                {products.categories.map((cate) => (\n                  <Option key={cate._id} value={cate}>\n                    {cate.name}\n                  </Option>\n                ))}\n              </Select>\n            </div>\n            {value.category !== {} &&\n              showSubCate &&\n              value.category.subcategories && (\n                <div className=\"col-12 col-lg-4 \">\n                  <p>Sub Category (Optional)</p>\n                  <Select\n                    value={value.subCategory.name}\n                    onChange={handleSubCategoryChange}\n                  >\n                    {value.category.subcategories\n                      .filter((sCate) => sCate.products.length > 0)\n                      .map((sCate) => (\n                        <Option key={sCate._id} value={sCate}>\n                          {sCate.name}\n                        </Option>\n                      ))}\n                  </Select>\n                </div>\n              )}\n          </div>\n          <div className=\"row load-btn-wrapper\">\n            <Button\n              className=\"load-btn\"\n              onClick={handleLoadProducts}\n              disabled={!value.category.products}\n            >\n              Load Products\n            </Button>\n          </div>\n        </div>\n        {selectedProducts.length !== 0 && (\n          <>\n            <div className=\"c-catalogue__products c-catalogue__products-selected row\">\n              <Heading className=\"col-12 my-2\" versions={['shop-all']}>\n                {'Selected Products'}\n              </Heading>\n\n              {selectedProducts.map((el, i) => (\n                <div\n                  key={el._id}\n                  className=\"col-lg-4 col-md-6 my-3\"\n                  style={{ padding: '0 40px' }}\n                >\n                  <Fade key={el._id}>\n                    <Product\n                      data={el}\n                      isSelectable\n                      isSelected={\n                        selectedProducts.filter((prd) => prd._id === el._id)\n                          .length > 0\n                      }\n                      handleSelectClick={handleSelectClick}\n                    />\n                  </Fade>\n                </div>\n              ))}\n              <div className=\"col-12 text-center\">\n                <Button className=\"\" onClick={handleSendEnquiry}>\n                  Send Enquiry\n                </Button>\n              </div>\n            </div>\n          </>\n        )}\n        <div className=\"c-catalogue__products row\">\n          {selectableProducts.length !== 0 &&\n            selectableProducts.map((el, i) => (\n              <div\n                key={el._id}\n                className=\"col-lg-4 col-md-6 my-3\"\n                style={{ padding: '0 40px' }}\n              >\n                <Fade key={el._id}>\n                  <Product\n                    data={el}\n                    isSelectable\n                    isSelected={\n                      selectedProducts.filter((prd) => prd._id === el._id)\n                        .length > 0\n                    }\n                    handleSelectClick={handleSelectClick}\n                  />\n                </Fade>\n              </div>\n            ))}\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nECatalogue.getInitialProps = async (ctx) => {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js');\n  const json = await res.json();\n  return { stars: json.stargazers_count };\n};\n"]},"metadata":{},"sourceType":"module"}