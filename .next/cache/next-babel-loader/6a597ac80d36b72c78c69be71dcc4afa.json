{"ast":null,"code":"import { ADD_ITEM, REMOVE_ITEM, MODIFY_ITEM, CLEAR_CART, SET_SHIPPING_CHARGE, SET_TAX_VALUE, SET_SHIPPING_TYPE, SET_COUPON_CODE_DISCOUNT_VALUE, SET_FAV_COUNTITY, SET_CART, SET_CART_NULL_ITEM, SET_CART_EDITABLE, REMOVE_COUPON_CODE_DISCOUNT_VALUE } from \"./type\";\nimport { addItem, removeItem, modifyProduct } from \"../../services/helpers/cart\";\nexport var addToCart = function addToCart(item) {\n  var cart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var userMetaId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  return function (dispatch) {\n    console.log({\n      item: item\n    });\n    dispatch({\n      type: ADD_ITEM,\n      payload: item\n    }); // console.log(\"1\");\n\n    if (cart) {\n      console.log(\"2\", {\n        cart: cart\n      });\n      var newCart = addItem(cart, item);\n      var isNulled = newCart.items.find(function (el) {\n        return el.isNull;\n      }); // console.log({\n      //   isNulled\n      // });\n\n      if (isNulled && !newCart.hasNulled) {\n        dispatch(setCartNullItem());\n      } else if (newCart.hasNulled) {\n        dispatch(setCartNullItem(false));\n      } // if (userMetaId) {\n      //   setCartApi({\n      //     usermetaid: userMetaId,\n      //     cart: newCart\n      //   });\n      // }\n\n    } else {\n      if (item.isNull) {\n        dispatch(setCartNullItem());\n      }\n    }\n  };\n};\nexport var fetchCart = function fetchCart(userId) {\n  return function (dispatch) {\n    // console.log({ userId });\n    getSingleUserApi(userId).then(function (rep) {\n      var res = rep.data;\n      console.log({\n        res: res\n      });\n\n      if (res.status && res.user && res.user.cart) {\n        dispatch({\n          type: SET_CART,\n          payload: res.user.cart\n        });\n      }\n    });\n  };\n};\nexport var removeFromCart = function removeFromCart(id) {\n  var cart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var userMetaId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  return function (dispatch) {\n    dispatch({\n      type: REMOVE_ITEM,\n      payload: id\n    });\n\n    if (cart && userMetaId) {\n      var newCart = removeItem(cart, id); // setCartApi({\n      //   usermetaid: userMetaId,\n      //   cart: newCart\n      // });\n    }\n  };\n};\nexport var modifyItem = function modifyItem(oldItem) {\n  var cart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var userMetaId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  return function (dispatch) {\n    dispatch({\n      type: MODIFY_ITEM,\n      payload: oldItem\n    });\n\n    if (cart && userMetaId) {\n      var newCart = modifyProduct(oldItem.oldItem, oldItem.newItem, cart); // setCartApi({\n      //   usermetaid: userMetaId,\n      //   cart: newCart\n      // });\n    }\n  };\n};\nexport var clearCart = function clearCart() {\n  var userMetaId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  return function (dispatch) {\n    // console.log(\"cleared =========== \")\n    dispatch({\n      type: CLEAR_CART\n    });\n\n    if (userMetaId) {// setCartApi({\n      //   usermetaid: userMetaId,\n      //   cart: initialCart\n      // });\n    }\n  };\n};\nexport var clearCartA = function clearCartA() {\n  //console.log(\"clear AAAAAAAAAA\")\n  return {\n    type: CLEAR_CART\n  };\n};\nexport var setShippingCharge = function setShippingCharge(charge) {\n  var cart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var userMetaId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  return function (dispatch) {\n    dispatch({\n      type: SET_SHIPPING_CHARGE,\n      payload: charge\n    });\n\n    if (cart && userMetaId) {// setCartApi({\n      //   usermetaid: userMetaId,\n      //   cart: {\n      //     ...cart,\n      //     shippingCharge: charge\n      //   }\n      // });\n    }\n  };\n};\nexport var setShippingType = function setShippingType(type) {\n  var cart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var userMetaId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  return function (dispatch) {\n    dispatch({\n      type: SET_SHIPPING_TYPE,\n      payload: type\n    });\n\n    if (cart && userMetaId) {// setCartApi({\n      //   usermetaid: userMetaId,\n      //   cart: {\n      //     ...cart,\n      //     shippingType: type\n      //   }\n      // });\n    }\n  };\n};\nexport var setTax = function setTax(tax) {\n  var cart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var userMetaId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  return function (dispatch) {\n    dispatch({\n      type: SET_TAX_VALUE,\n      payload: tax\n    });\n\n    if (cart && userMetaId) {// setCartApi({\n      //   usermetaid: userMetaId,\n      //   cart: {\n      //     ...cart,\n      //     taxPercent: tax.taxPercent,\n      //     taxCountry: tax.taxCountry\n      //   }\n      // });\n    }\n  };\n};\nexport var setCoupon = function setCoupon(coupon) {\n  var cart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var userMetaId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  return function (dispatch) {\n    console.log(\"In action\");\n    dispatch({\n      type: SET_COUPON_CODE_DISCOUNT_VALUE,\n      payload: coupon\n    });\n\n    if (cart && userMetaId) {// setCartApi({\n      //   usermetaid: userMetaId,\n      //   cart: {\n      //     ...cart,\n      //     taxCouponCode: coupon.taxCouponCode,\n      //     taxCouponDiscount: coupon.taxCouponDiscount\n      //   }\n      // });\n    }\n  };\n};\nexport var setFav = function setFav(fav) {\n  var cart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var userMetaId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  return function (dispatch) {\n    dispatch({\n      type: SET_FAV_COUNTITY,\n      payload: fav\n    });\n\n    if (cart && userMetaId) {// setCartApi({\n      //   usermetaid: userMetaId,\n      //   cart: {\n      //     ...cart,\n      //     setFav: fav.setFav\n      //   }\n      // });\n    }\n  };\n};\nexport var setCartNullItem = function setCartNullItem() {\n  var isNull = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  return {\n    type: SET_CART_NULL_ITEM,\n    payload: isNull\n  };\n};\nexport var setEditable = function setEditable() {\n  var isEditable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  return {\n    type: SET_CART_EDITABLE,\n    payload: isEditable\n  };\n};\nexport var removeCoupon = function removeCoupon() {\n  var cart = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  var userMetaId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return function (dispatch) {\n    console.log(\"In action\");\n    dispatch({\n      type: REMOVE_COUPON_CODE_DISCOUNT_VALUE,\n      payload: {}\n    });\n\n    if (cart && userMetaId) {// setCartApi({\n      //   usermetaid: userMetaId,\n      //   cart: {\n      //     ...cart,\n      //     taxCouponCode: coupon.taxCouponCode,\n      //     taxCouponDiscount: coupon.taxCouponDiscount\n      //   }\n      // });\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"module"}