{"ast":null,"code":"var _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missnew front/components/CartDrawer.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport dynamic from 'next/dynamic';\nconst CartItem = dynamic(() => import(\"./CartItem\"), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"./CartItem\")],\n    modules: [\"./CartItem\"]\n  }\n});\nconst Button = dynamic(() => import(\"./form-components/Button\"), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"./form-components/Button\")],\n    modules: [\"./form-components/Button\"]\n  }\n});\nimport { connect } from \"react-redux\";\nimport { getProductTitle, getProductShortDesc, getProductImage } from \"../services/helpers/product\";\nimport { getGrandTotal } from \"../services/helpers/cart\";\nimport { numberFormat } from \"../services/helpers/misc\";\nimport { initialCart } from \"../constants/reduxInitialStates\";\nimport { modifyItem, removeFromCart, hideCartBar, setCoupon as setStateCoupon, removeCoupon } from \"../redux/actions\";\nimport Link from \"next/link\";\nconst Heading = dynamic(() => import(\"./Heading\"), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"./Heading\")],\n    modules: [\"./Heading\"]\n  }\n});\nconst Input = dynamic(() => import(\"./form-components/Input\"), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"./form-components/Input\")],\n    modules: [\"./form-components/Input\"]\n  }\n});\nimport { useEffect, useState } from \"react\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport { getCoupon } from \"../services/apis/checkout\";\n\nconst CartDrawer = ({\n  complete,\n  cart,\n  modifyItem,\n  removeFromCart,\n  hideCartBar,\n  setStateCoupon,\n  removeCoupon\n}) => {\n  const {\n    0: coupon,\n    1: setCoupon\n  } = useState(\"\");\n\n  const handleInput = e => {\n    setCoupon(e.target.value.toUpperCase());\n\n    if (e.target.value === \"\" && cart.taxCouponCode != \"\") {\n      removeCoupon(cart);\n    }\n  };\n\n  useEffect(() => {\n    if (cart.taxCouponDiscount != 0) {\n      setCoupon(cart.taxCouponCode);\n    }\n  }, []);\n\n  const handleDiscount = async () => {\n    // e.preventDefault();\n    const {\n      data\n    } = await getCoupon(coupon);\n\n    if (data.status) {\n      setStateCoupon(data.coupon.data.filter(data => data.id === coupon)[0], cart);\n    }\n  }; //console.log(cart);\n\n\n  const qtyChange = (qty, oldItem) => {\n    modifyItem({\n      oldItem,\n      newItem: _objectSpread(_objectSpread({}, oldItem), {}, {\n        qty\n      })\n    });\n  };\n\n  const grandTotal = getGrandTotal(cart.subTotal, cart.taxPercent, cart.shippingCharge, cart.taxCouponDiscount);\n  console.log(cart);\n  const hasItems = cart.items.length > 0 ? true : false;\n  const taxPrice = cart.taxCouponDiscount ? (cart.taxCouponDiscount / 100 * cart.subTotal).toFixed(2) : 0;\n  const shippingCharge = (cart.shippingCharge || 0).toFixed(2) || 0;\n  console.log(taxPrice, cart.taxPercent);\n  return __jsx(\"div\", {\n    className: \"c-cart-drawer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, hasItems && __jsx(React.Fragment, null, cart.items.map((el, i) => {\n    // console.log(el);\n    return __jsx(CartItem, {\n      key: i,\n      title: getProductTitle(el),\n      image: getProductImage(el),\n      subTitle: getProductShortDesc(el),\n      price: `$${numberFormat(parseFloat(el.saleprice) * el.qty)}`,\n      quantity: el.qty,\n      onRemove: () => removeFromCart(el),\n      isDisabled: !cart.isEditable,\n      onQtyChange: e => {\n        if (cart.isEditable) qtyChange(e, el);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    });\n  }), __jsx(\"div\", {\n    className: \"mt-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }), complete && __jsx(React.Fragment, null, __jsx(CartItem, {\n    small: true,\n    title: \"Subtotal\",\n    price: `$${numberFormat(parseFloat(cart.subTotal))}`,\n    total: true,\n    versions: [\"small\", \"no-border\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }), __jsx(CartItem, {\n    small: true,\n    title: \"Shipping\",\n    price: `$${shippingCharge}`,\n    total: true // versions={cart.taxPercent ? [\"small\", \"no-border\"] : [\"small\"]}\n    ,\n    versions: [\"small\", \"no-border\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }), taxPrice > 0 && __jsx(CartItem, {\n    small: true,\n    title: \"Discount\" // price={`${(cart.taxPercent) ? cart.taxPercent : 0}`}\n    ,\n    price: `-$${taxPrice}`,\n    total: true,\n    versions: [\"small\", \"no-border\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }), cart.taxPercent > 0 && __jsx(CartItem, {\n    small: true,\n    title: \"Tax\" // price={`${(cart.taxPercent) ? cart.taxPercent : 0}`}\n    ,\n    price: `$${numberFormat(parseFloat(cart.taxPercent * cart.subTotal))}`,\n    total: true,\n    versions: [\"small\", \"no-border\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }), __jsx(CartItem, {\n    title: \"Total\",\n    price: `$${grandTotal}`,\n    total: true,\n    versions: [\"no-border\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: \"c-cart-drawer__discount-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    value: coupon,\n    onChange: handleInput,\n    placeholder: \"Discount Code\",\n    versions: [\"discount\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }), __jsx(Button, {\n    onClick: handleDiscount,\n    type: \"submit\",\n    versions: [\"discount\"],\n    value: \"Apply\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }))), !complete && __jsx(React.Fragment, null, __jsx(CartItem, {\n    title: \"subtotal\",\n    price: `$${numberFormat(parseFloat(cart.subTotal))}`,\n    total: true,\n    versions: [\"no-border\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: \"c-cart-drawer__btn-wrapper row justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, __jsx(Link, {\n    href: \"/checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    className: \"c-btn c-btn--block c-btn--dark mt-5\",\n    style: {\n      marginBottom: \"4rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 19\n    }\n  }, \"Proceed to checkout\"))))), !hasItems && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"c-cart-drawer__emptyCart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }\n  }, __jsx(LazyLoadImage, {\n    className: \"c-cart-drawer__emptyCart--icon\",\n    src: \"/images/empty-cart.png\",\n    alt: \"Empty Cart..\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  })), __jsx(Heading, {\n    parentClass: \"c-cart-item\",\n    versions: [\"dark\"],\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, \"Your bag is empty\"), __jsx(\"div\", {\n    className: \"c-cart-drawer__btn-wrapper mt-auto mb-4 row justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: \"/shop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    onClick: hideCartBar,\n    className: \"c-btn c-btn--block c-btn--dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, \"Continue shopping\")))));\n};\n\nCartDrawer.defaultProps = {\n  complete: false,\n  cart: initialCart\n};\n\nconst mapStateToProps = state => ({\n  cart: state.cart\n});\n\nexport default connect(mapStateToProps, {\n  modifyItem,\n  removeFromCart,\n  hideCartBar,\n  setStateCoupon,\n  removeCoupon\n})(CartDrawer);","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missnew front/components/CartDrawer.js"],"names":["dynamic","CartItem","Button","connect","getProductTitle","getProductShortDesc","getProductImage","getGrandTotal","numberFormat","initialCart","modifyItem","removeFromCart","hideCartBar","setCoupon","setStateCoupon","removeCoupon","Link","Heading","Input","useEffect","useState","LazyLoadImage","getCoupon","CartDrawer","complete","cart","coupon","handleInput","e","target","value","toUpperCase","taxCouponCode","taxCouponDiscount","handleDiscount","data","status","filter","id","qtyChange","qty","oldItem","newItem","grandTotal","subTotal","taxPercent","shippingCharge","console","log","hasItems","items","length","taxPrice","toFixed","map","el","i","parseFloat","saleprice","isEditable","marginBottom","textAlign","defaultProps","mapStateToProps","state"],"mappings":"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","sourcesContent":["import dynamic from 'next/dynamic'\nconst CartItem = dynamic(() => import(\"./CartItem\"));\nconst Button = dynamic(() => import(\"./form-components/Button\"));\nimport { connect } from \"react-redux\";\nimport {\n  getProductTitle,\n  getProductShortDesc,\n  getProductImage,\n} from \"../services/helpers/product\";\nimport { getGrandTotal } from \"../services/helpers/cart\";\nimport { numberFormat } from \"../services/helpers/misc\";\nimport { initialCart } from \"../constants/reduxInitialStates\";\nimport {\n  modifyItem,\n  removeFromCart,\n  hideCartBar,\n  setCoupon as setStateCoupon,\n  removeCoupon,\n} from \"../redux/actions\";\nimport Link from \"next/link\";\nconst Heading = dynamic(() => import(\"./Heading\"));\nconst Input = dynamic(() => import(\"./form-components/Input\"));\nimport { useEffect, useState } from \"react\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport { getCoupon } from \"../services/apis/checkout\";\n\nconst CartDrawer = ({\n  complete,\n  cart,\n  modifyItem,\n  removeFromCart,\n  hideCartBar,\n  setStateCoupon,\n  removeCoupon,\n}) => {\n  const [coupon, setCoupon] = useState(\"\");\n  const handleInput = (e) => {\n    setCoupon(e.target.value.toUpperCase());\n    if (e.target.value === \"\" && cart.taxCouponCode != \"\") {\n      removeCoupon(cart);\n    }\n  };\n  useEffect(() => {\n    if (cart.taxCouponDiscount != 0) {\n      setCoupon(cart.taxCouponCode);\n    }\n  }, []);\n  const handleDiscount = async () => {\n    // e.preventDefault();\n    const { data } = await getCoupon(coupon);\n    if (data.status) {\n      setStateCoupon(\n        data.coupon.data.filter((data) => data.id === coupon)[0],\n        cart\n      );\n    }\n  };\n  //console.log(cart);\n  const qtyChange = (qty, oldItem) => {\n    modifyItem({\n      oldItem,\n      newItem: {\n        ...oldItem,\n        qty,\n      },\n    });\n  };\n  const grandTotal = getGrandTotal(\n    cart.subTotal,\n    cart.taxPercent,\n    cart.shippingCharge,\n    cart.taxCouponDiscount\n  );\n  console.log(cart);\n  const hasItems = cart.items.length > 0 ? true : false;\n  const taxPrice = cart.taxCouponDiscount\n    ? ((cart.taxCouponDiscount / 100) * cart.subTotal).toFixed(2)\n    : 0;\n  const shippingCharge = (cart.shippingCharge || 0).toFixed(2) || 0;\n  console.log(taxPrice,cart.taxPercent);\n  return (\n    <div className=\"c-cart-drawer\">\n      {/* <p style={{ color: \"#fff\" }}></p> */}\n      {hasItems && (\n        <>\n          {cart.items.map((el, i) => {\n            // console.log(el);\n            return (\n              <CartItem\n                key={i}\n                title={getProductTitle(el)}\n                image={getProductImage(el)}\n                subTitle={getProductShortDesc(el)}\n                price={`$${numberFormat(parseFloat(el.saleprice) * el.qty)}`}\n                quantity={el.qty}\n                onRemove={() => removeFromCart(el)}\n                isDisabled={!cart.isEditable}\n                onQtyChange={(e) => {\n                  if (cart.isEditable) qtyChange(e, el);\n                }}\n              />\n            );\n          })}\n          <div className=\"mt-auto\"></div>\n          {complete && (\n            <>\n              <CartItem\n                small={true}\n                title={\"Subtotal\"}\n                price={`$${numberFormat(parseFloat(cart.subTotal))}`}\n                total={true}\n                versions={[\"small\", \"no-border\"]}\n              />\n              <CartItem\n                small={true}\n                title={\"Shipping\"}\n                price={`$${shippingCharge}`}\n                total={true}\n                // versions={cart.taxPercent ? [\"small\", \"no-border\"] : [\"small\"]}\n                versions={[\"small\", \"no-border\"]}\n              />\n              {taxPrice > 0 && (\n                <CartItem\n                  small={true}\n                  title={\"Discount\"}\n                  // price={`${(cart.taxPercent) ? cart.taxPercent : 0}`}\n                  price={`-$${taxPrice}`}\n                  total={true}\n                  versions={[\"small\", \"no-border\"]}\n                />\n              )}\n              {cart.taxPercent > 0 && (\n                <CartItem\n                  small={true}\n                  title={\"Tax\"}\n                  // price={`${(cart.taxPercent) ? cart.taxPercent : 0}`}\n                  price={`$${numberFormat(parseFloat(cart.taxPercent*cart.subTotal))}`}\n                  total={true}\n                  versions={[\"small\", \"no-border\"]}\n                />\n              )}\n              <CartItem\n                title={\"Total\"}\n                price={`$${grandTotal}`}\n                total={true}\n                versions={[\"no-border\"]}\n              />\n              <div className=\"c-cart-drawer__discount-flex\">\n                {/* <Form onSubmit={handleDiscount}> */}\n                <Input\n                  value={coupon}\n                  onChange={handleInput}\n                  placeholder=\"Discount Code\"\n                  versions={[\"discount\"]}\n                />\n                <Button\n                  onClick={handleDiscount}\n                  type=\"submit\"\n                  versions={[\"discount\"]}\n                  value=\"Apply\"\n                />\n                {/* </Form> */}\n              </div>\n            </>\n          )}\n\n          {!complete && (\n            <>\n              <CartItem\n                title={\"subtotal\"}\n                price={`$${numberFormat(parseFloat(cart.subTotal))}`}\n                total={true}\n                versions={[\"no-border\"]}\n              />\n              <div className=\"c-cart-drawer__btn-wrapper row justify-content-center\">\n                <Link href=\"/checkout\">\n                  <a\n                    className=\"c-btn c-btn--block c-btn--dark mt-5\"\n                    style={{ marginBottom: \"4rem\" }}\n                  >\n                    Proceed to checkout\n                  </a>\n                </Link>\n              </div>\n            </>\n          )}\n        </>\n      )}\n      {!hasItems && (\n        <>\n          <div className=\"c-cart-drawer__emptyCart\">\n            {/* <ReactSVG src=\"/images/cart-icon-1.svg\" /> */}\n            <LazyLoadImage\n              className=\"c-cart-drawer__emptyCart--icon\"\n              src=\"/images/empty-cart.png\"\n              alt=\"Empty Cart..\"\n            />\n          </div>\n          <Heading\n            parentClass=\"c-cart-item\"\n            versions={[\"dark\"]}\n            style={{ textAlign: \"center\" }}\n          >\n            Your bag is empty\n          </Heading>\n          <div className=\"c-cart-drawer__btn-wrapper mt-auto mb-4 row justify-content-center\">\n            <Link href=\"/shop\">\n              <a\n                onClick={hideCartBar}\n                className=\"c-btn c-btn--block c-btn--dark\"\n              >\n                Continue shopping\n              </a>\n            </Link>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nCartDrawer.defaultProps = {\n  complete: false,\n  cart: initialCart,\n};\nconst mapStateToProps = (state) => ({\n  cart: state.cart,\n});\n\nexport default connect(mapStateToProps, {\n  modifyItem,\n  removeFromCart,\n  hideCartBar,\n  setStateCoupon,\n  removeCoupon,\n})(CartDrawer);\n"]},"metadata":{},"sourceType":"module"}