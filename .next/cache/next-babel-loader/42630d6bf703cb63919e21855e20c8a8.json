{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport dynamic from \"next/dynamic\";\nvar Layout = dynamic(function () {\n  return import(\"../../components/Layouts/Layout\");\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"../../components/Layouts/Layout\")];\n    },\n    modules: [\"../../components/Layouts/Layout\"]\n  }\n});\nvar ProductInfo = dynamic(function () {\n  return import(\"../../components/ProductInfo\");\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"../../components/ProductInfo\")];\n    },\n    modules: [\"../../components/ProductInfo\"]\n  }\n});\nvar HImgSection = dynamic(function () {\n  return import(\"../../components/HImgSection\");\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"../../components/HImgSection\")];\n    },\n    modules: [\"../../components/HImgSection\"]\n  }\n});\nimport { useEffect, useState } from \"react\";\nimport { getProductImage, getProductAttributes, getVisibleProducts, getProductDescription } from \"../../services/helpers/product\";\nvar Heading = dynamic(function () {\n  return import(\"../../components/Heading\");\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"../../components/Heading\")];\n    },\n    modules: [\"../../components/Heading\"]\n  }\n});\nvar TitleList = dynamic(function () {\n  return import(\"../../components/TItleList\");\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"../../components/TItleList\")];\n    },\n    modules: [\"../../components/TItleList\"]\n  }\n});\nvar ProductDetailsTab = dynamic(function () {\n  return import(\"../../components/ProductDetailsTab\");\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"../../components/ProductDetailsTab\")];\n    },\n    modules: [\"../../components/ProductDetailsTab\"]\n  }\n});\nvar ProductSlider = dynamic(function () {\n  return import(\"../../components/ProductSlider\");\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"../../components/ProductSlider\")];\n    },\n    modules: [\"../../components/ProductSlider\"]\n  }\n});\nimport { useRouter } from \"next/router\";\nimport { connect } from \"react-redux\";\nimport fetch from \"isomorphic-unfetch\";\nimport projectSettings from \"../../constants/projectSettings\";\nimport apiList from \"../../services/apis/apiList\";\nimport Error from \"next/error\";\nvar product = {\n  title: \"CBD Isolate 500 mg\"\n};\n\nvar Product = function Product(_ref) {\n  var product = _ref.product,\n      allProducts = _ref.allProducts,\n      props = _objectWithoutProperties(_ref, [\"product\", \"allProducts\"]);\n\n  var _useState = useState(false),\n      isScrolled = _useState[0],\n      setIsScrolled = _useState[1];\n\n  useEffect(function () {\n    setIsScrolled(true);\n    document.body.scrollTop = document.documentElement.scrollTop = 0;\n  }, isScrolled);\n  var router = useRouter();\n  var pid = router.query.pid;\n  var state = {\n    productDetails: null,\n    productList: [{\n      title: \"title\",\n      subTitle: \"sub title\",\n      image: \"/images/oil.png\"\n    }, {\n      title: \"lorem\",\n      subTitle: \"sub title\",\n      image: \"/images/capsule-img.png\"\n    }, {\n      title: \"ipsum\",\n      subTitle: \"sub title\",\n      image: \"/images/cbd-oil.png\"\n    }]\n  };\n  var productList = state.productList;\n  var productAttr = getProductAttributes(product, allProducts);\n  var image = getProductImage(product, \"sectionB\"); //|| \"/images/cbd-oil.png\"\n\n  var productImage = getProductImage(product) ? projectSettings.serverUrl + getProductImage(product) : \"/images/cbd-oil.png\";\n\n  if (props.err) {\n    return __jsx(Error, props.err);\n  }\n\n  return __jsx(Layout, {\n    headerTheme: \"black\",\n    fixed: true\n  }, __jsx(ProductInfo, {\n    product: product,\n    reviews: props.reviews,\n    productAttr: productAttr.filter(function (el, i) {\n      return product.combo ? i < 2 : i < 1;\n    }),\n    image: productImage\n  }), __jsx(HImgSection, {\n    parentClass: \"c-product-single\",\n    version: [\"full\"],\n    image: projectSettings.filePath + image\n  }, __jsx(\"div\", null, __jsx(Heading, {\n    style: {\n      fontSize: \"30px\",\n      fontFamily: \"futuraBT-book\"\n    }\n  }, getProductDescription(product))), __jsx(\"div\", {\n    className: \"c-product-single__list\"\n  }, productAttr.map(function (el, i) {\n    if (product.combo ? i < 2 : i < 1) return null;\n    return __jsx(TitleList, {\n      parentClass: \"c-product-single\",\n      key: i,\n      title: el.title,\n      versions: [\"responsive\"]\n    }, el.description);\n  }))), __jsx(\"div\", {\n    className: \"c-product-single__details-wrapper\"\n  }, __jsx(ProductDetailsTab, {\n    product: product,\n    reviews: props.reviews,\n    allProducts: allProducts,\n    parentClass: \"c-product-single\"\n  })), __jsx(\"div\", {\n    className: \"c-product-single__related-section\"\n  }, __jsx(\"div\", {\n    className: \"row justify-content-center\",\n    style: {\n      maxWidth: '100%'\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-6\"\n  }, __jsx(Heading, {\n    style: {\n      textAlign: \"center\"\n    },\n    versions: [\"default\", \"upper\", \"weight-500\"]\n  }, \"Accompany with\")), __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(ProductSlider, {\n    parentClass: \"c-product-single\",\n    products: allProducts\n  })))));\n};\n\nProduct.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n    var query, resMain, product, res, productObj, _res, _productObj, reviewRes, reviews, allRes, allProductObj, allProducts;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            query = _ref2.query, resMain = _ref2.res;\n            // const {\n            //     baseUrl\n            // } = projectSettings\n            product = null;\n            _context.next = 4;\n            return fetch(apiList.getProductByName + query.pid);\n\n          case 4:\n            res = _context.sent;\n            _context.next = 7;\n            return res.json();\n\n          case 7:\n            productObj = _context.sent;\n\n            if (productObj.product_details) {\n              _context.next = 18;\n              break;\n            }\n\n            _context.next = 11;\n            return fetch(apiList.getProductById + query.pid);\n\n          case 11:\n            _res = _context.sent;\n            _context.next = 14;\n            return _res.json();\n\n          case 14:\n            _productObj = _context.sent;\n            product = getVisibleProducts([_productObj.product_details]);\n            _context.next = 19;\n            break;\n\n          case 18:\n            product = getVisibleProducts([productObj.product_details]);\n\n          case 19:\n            _context.next = 21;\n            return fetch(apiList.getReviews + productObj.product_details._id);\n\n          case 21:\n            reviewRes = _context.sent;\n            _context.next = 24;\n            return reviewRes.json();\n\n          case 24:\n            reviews = _context.sent;\n            _context.next = 27;\n            return fetch(apiList.getAllProducts);\n\n          case 27:\n            allRes = _context.sent;\n            _context.next = 30;\n            return allRes.json();\n\n          case 30:\n            allProductObj = _context.sent;\n            allProducts = getVisibleProducts(allProductObj.products).filter(function (el) {\n              return el._id !== query.pid;\n            });\n\n            if (!(product.length && product[0] && productObj.status)) {\n              _context.next = 34;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              res: res,\n              product: product.length && product[0],\n              productObj: productObj,\n              allProducts: allProducts,\n              allProductObj: allProductObj,\n              reviews: reviews.reviews\n            });\n\n          case 34:\n            resMain.statusCode = 404;\n            return _context.abrupt(\"return\", {\n              err: {\n                statusCode: 404\n              }\n            });\n\n          case 36:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default connect(function (state) {\n  return {\n    cart: state.cart,\n    user: state.user\n  };\n})(Product);","map":null,"metadata":{},"sourceType":"module"}