{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport dynamic from 'next/dynamic';\nimport Router from 'next/router';\nimport '../components/styles/pages/_catalogue.scss';\nvar Layout = dynamic(function () {\n  return import('../components/Layouts/Layout');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../components/Layouts/Layout')];\n    },\n    modules: ['../components/Layouts/Layout']\n  }\n});\nvar Heading = dynamic(function () {\n  return import('../components/Heading');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../components/Heading')];\n    },\n    modules: ['../components/Heading']\n  }\n});\nimport { getCategories, getProducts } from '../redux/actions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Select, Input, Button, Modal } from 'antd';\nimport { getSubcategory, createContactUs } from '../services/apis/contact';\nimport { Fade } from 'reactstrap';\nimport Product from '../components/Product.js';\nvar Option = Select.Option;\nexport default function ECatalogue() {\n  var dispatch = useDispatch();\n\n  var _useState = useState({\n    name: '',\n    storeName: '',\n    phoneNumber: '',\n    address: '',\n    city: '',\n    state: '',\n    category: {},\n    subCategory: {}\n  }),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState([]),\n      selectableProducts = _useState2[0],\n      setSelectableProducts = _useState2[1];\n\n  var _useState3 = useState([]),\n      selectedProducts = _useState3[0],\n      setSelectedProducts = _useState3[1];\n\n  var _useState4 = useState(false),\n      showSubCate = _useState4[0],\n      setShowSubCate = _useState4[1];\n\n  var handleInputChange = function handleInputChange(event) {\n    setValue(_objectSpread(_objectSpread({}, value), {}, _defineProperty({}, event.target.name, event.target.value)));\n  };\n\n  function handleCategoryChange(v) {\n    setValue(_objectSpread(_objectSpread({}, value), {}, {\n      category: v,\n      subCategory: {}\n    }));\n    var isSubCateExist = Object.keys(v.subcategories).length !== 0;\n\n    if (isSubCateExist) {\n      var isSubCateWithProductExist = v.subcategories.filter(function (sCate) {\n        return sCate.products.length > 0;\n      }).length > 0;\n      if (isSubCateWithProductExist) setShowSubCate(true);else setShowSubCate(false);\n    } else setShowSubCate(false);\n  }\n\n  function handleSubCategoryChange(v) {\n    setValue(_objectSpread(_objectSpread({}, value), {}, {\n      subCategory: v\n    }));\n  }\n\n  var products = useSelector(function (state) {\n    return state.products;\n  });\n  useEffect(function () {\n    dispatch(getCategories());\n  }, []);\n\n  var handleLoadProducts = function handleLoadProducts() {\n    if (value.subCategory._id) {\n      getSubcategory(value.subCategory._id).then(function (res) {\n        setSelectableProducts(res.data.products);\n      })[\"catch\"](function (err) {\n        return setSelectableProducts(value.category.products);\n      });\n    } else {\n      setSelectableProducts(value.category.products);\n    }\n  };\n\n  var handleSelectClick = function handleSelectClick(data) {\n    var tempSelectedProducts = _toConsumableArray(selectedProducts);\n\n    var isSelected = selectedProducts.filter(function (prd) {\n      return prd._id === data._id;\n    }).length > 0;\n    console.log('isSelected', isSelected);\n\n    if (isSelected) {\n      tempSelectedProducts = tempSelectedProducts.filter(function (prd) {\n        return prd._id !== data._id;\n      });\n    } else {\n      tempSelectedProducts.push(data);\n    }\n\n    console.log('tempSelectedProducts', tempSelectedProducts);\n    setSelectedProducts(tempSelectedProducts);\n  };\n\n  var handleSendEnquiry = function handleSendEnquiry() {\n    var contactData = {\n      name: value.name,\n      storeName: value.storeName,\n      phone: value.phoneNumber,\n      address: value.address,\n      city: value.city,\n      state: value.state,\n      products: selectedProducts,\n      callScreen: 'enquiry'\n    };\n    createContactUs(contactData).then(function (res) {\n      return res.data && Modal.success({\n        title: 'Enquiry Request Registered Successfully!',\n        okText: 'Explore Products',\n        onOk: function onOk() {\n          Router.push('/');\n        }\n      });\n    })[\"catch\"](function (err) {\n      return Modal.error({\n        title: 'Request Failed!',\n        okText: 'Explore Products',\n        onOk: function onOk() {\n          Router.push('/');\n        }\n      });\n    });\n  };\n\n  return __jsx(Layout, {\n    headerVersions: ['bg-dark'],\n    headerTheme: \"black\"\n  }, __jsx(\"div\", {\n    className: \"c-catalogue\"\n  }, __jsx(Heading, {\n    versions: ['shop-all']\n  }, 'Enquiry Form'), __jsx(\"div\", {\n    className: \"c-catalogue__options\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \"\n  }, __jsx(\"p\", null, \"Name\"), __jsx(Input.Search, {\n    required: true,\n    placeholder: \"Enter your name\",\n    name: \"name\",\n    value: value.name,\n    onChange: handleInputChange\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \"\n  }, __jsx(\"p\", null, \"Store Name\"), __jsx(Input, {\n    placeholder: \"Enter your store name\",\n    name: \"storeName\",\n    value: value.storeName,\n    onChange: handleInputChange\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \"\n  }, __jsx(\"p\", null, \"Phone Number\"), __jsx(Input, {\n    placeholder: \"Enter your phone no\",\n    name: \"phoneNumber\",\n    value: value.phoneNumber,\n    onChange: handleInputChange\n  }))), __jsx(\"div\", {\n    className: \" row\"\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \"\n  }, __jsx(\"p\", null, \"Address\"), __jsx(Input, {\n    placeholder: \"Enter your address\",\n    name: \"address\",\n    value: value.address,\n    onChange: handleInputChange\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \"\n  }, __jsx(\"p\", null, \"City\"), __jsx(Input, {\n    placeholder: \"Enter your city\",\n    name: \"city\",\n    value: value.city,\n    onChange: handleInputChange\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \"\n  }, __jsx(\"p\", null, \"State\"), __jsx(Input, {\n    placeholder: \"Enter your state\",\n    name: \"state\",\n    value: value.state,\n    onChange: handleInputChange\n  }))), __jsx(\"div\", {\n    className: \" row\"\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \"\n  }, __jsx(\"p\", null, \"Category\"), __jsx(Select, {\n    value: value.category.name,\n    onChange: handleCategoryChange\n  }, products.categories.map(function (cate) {\n    return __jsx(Option, {\n      key: cate._id,\n      value: cate\n    }, cate.name);\n  }))), value.category !== {} && showSubCate && value.category.subcategories && __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \"\n  }, __jsx(\"p\", null, \"Sub Category (Optional)\"), __jsx(Select, {\n    value: value.subCategory.name,\n    onChange: handleSubCategoryChange\n  }, value.category.subcategories.filter(function (sCate) {\n    return sCate.products.length > 0;\n  }).map(function (sCate) {\n    return __jsx(Option, {\n      key: sCate._id,\n      value: sCate\n    }, sCate.name);\n  })))), __jsx(\"div\", {\n    className: \"row load-btn-wrapper\"\n  }, __jsx(Button, {\n    className: \"load-btn\",\n    onClick: handleLoadProducts,\n    disabled: !value.category.products\n  }, \"Load Products\"))), selectedProducts.length !== 0 && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"c-catalogue__products c-catalogue__products-selected row\"\n  }, __jsx(Heading, {\n    className: \"col-12 my-2\",\n    versions: ['shop-all']\n  }, 'Selected Products'), selectedProducts.map(function (el, i) {\n    return __jsx(\"div\", {\n      key: el._id,\n      className: \"col-lg-4 col-md-6 my-3\",\n      style: {\n        padding: '0 40px'\n      }\n    }, __jsx(Fade, {\n      key: el._id\n    }, __jsx(Product, {\n      data: el,\n      isSelectable: true,\n      isSelected: selectedProducts.filter(function (prd) {\n        return prd._id === el._id;\n      }).length > 0,\n      handleSelectClick: handleSelectClick\n    })));\n  }), __jsx(\"div\", {\n    className: \"col-12 text-center\"\n  }, __jsx(Button, {\n    className: \"\",\n    onClick: handleSendEnquiry\n  }, \"Send Enquiry\")))), __jsx(\"div\", {\n    className: \"c-catalogue__products row\"\n  }, selectableProducts.length !== 0 && selectableProducts.map(function (el, i) {\n    return __jsx(\"div\", {\n      key: el._id,\n      className: \"col-lg-4 col-md-6 my-3\",\n      style: {\n        padding: '0 40px'\n      }\n    }, __jsx(Fade, {\n      key: el._id\n    }, __jsx(Product, {\n      data: el,\n      isSelectable: true,\n      isSelected: selectedProducts.filter(function (prd) {\n        return prd._id === el._id;\n      }).length > 0,\n      handleSelectClick: handleSelectClick\n    })));\n  }))));\n}\n\nECatalogue.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var res, json;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch('https://api.github.com/repos/vercel/next.js');\n\n          case 2:\n            res = _context.sent;\n            _context.next = 5;\n            return res.json();\n\n          case 5:\n            json = _context.sent;\n            return _context.abrupt(\"return\", {\n              stars: json.stargazers_count\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":null,"metadata":{},"sourceType":"module"}