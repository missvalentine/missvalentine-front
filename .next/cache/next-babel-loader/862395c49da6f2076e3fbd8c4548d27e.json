{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/services/helpers/product.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { encodeUrlFn, getParentage, numberFormat } from \"./misc\";\nimport { variablePriceSet } from \"./cart\";\nexport var getProductImage = function getProductImage() {\n  var product = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var image = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"main\";\n\n  if (image === \"main\") {\n    if (product.productid) {\n      if (product.productid.featurefilepath) return product.productid.featurefilepath;\n    }\n\n    if (product.productId) {\n      if (product.productId.featurefilepath) return product.productId.featurefilepath;\n    }\n\n    if (product.featureimage) return product.featureimage;\n    if (product.galleryimgdetails) return product.galleryimgdetails[0];\n  }\n\n  if (image === \"sectionB\") {\n    if (product.productid) {\n      if (product.productid.sectionbimage) return product.productid.sectionbimage;\n    }\n\n    if (product.productId) {\n      if (product.productId.sectionbimage) return product.productId.sectionbimage;\n    }\n\n    if (product.sectionbimage) return product.sectionbimage;\n  }\n\n  return null;\n};\nexport var getProductImageArray = function getProductImageArray() {\n  var product = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var image = [];\n\n  if (product.productid) {\n    if (product.productid.featurefilepath) image = [].concat(_toConsumableArray(image), [product.productid.featurefilepath]);\n  }\n\n  if (product.featureimage) image = [].concat(_toConsumableArray(image), [product.featureimage]);\n  if (product.galleryimgdetails) image = [].concat(_toConsumableArray(image), _toConsumableArray(product.galleryimgdetails));\n  return image;\n};\nexport var getProductAttributes = function getProductAttributes() {\n  var product = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var allProducts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (product.combo) {\n    return product.products.map(function (el) {\n      var combo_pid = el.combo_pid;\n      var thisProduct = allProducts.find(function (elx) {\n        return elx._id === combo_pid;\n      });\n\n      if (thisProduct) {\n        return {\n          title: thisProduct.title || thisProduct.productid && thisProduct.productid.producttitle,\n          description: thisProduct.description || thisProduct.productid && thisProduct.productid.description\n        };\n      }\n\n      return null;\n    }).filter(function (el) {\n      return el;\n    });\n  }\n\n  return product.attributecontent || [];\n};\nexport var getProductDescription = function getProductDescription(product) {\n  if (product) {\n    if (product.productid) {\n      return product.productid.description;\n    }\n\n    if (product.description) {\n      return product.description;\n    }\n  }\n\n  return \"\";\n};\nexport var getProductTitle = function getProductTitle(product) {\n  if (product) {\n    if (product.title) {\n      return product.title;\n    }\n\n    if (product.productid) {\n      return product.productid.producttitle;\n    }\n\n    if (product.producttitle) {\n      return product.producttitle;\n    }\n  }\n\n  return \"\";\n};\nexport var getProductShortDesc = function getProductShortDesc(product) {\n  if (product) {\n    if (product.sdescription) {\n      return product.sdescription;\n    }\n\n    if (product.productid) {\n      return product.productid.sdescription;\n    }\n  }\n\n  return \"\";\n}; //\n\nexport var filteredAttr = function filteredAttr(variation, attr) {\n  var attrX = variation.map(function (el) {\n    var sale_price = el.sale_price,\n        sku = el.sku,\n        bar = el.bar,\n        regular_price = el.regular_price,\n        rest = _objectWithoutProperties(el, [\"sale_price\", \"sku\", \"bar\", \"regular_price\"]);\n\n    return _objectSpread({}, rest);\n  });\n  var attrY = attrX.filter(function (el) {\n    return Object.keys(el).length === attr.length;\n  });\n  var attrZ = removeDuplicateObjAr(attrY);\n  return attrZ;\n};\nexport var removeDuplicateObjAr = function removeDuplicateObjAr(arr) {\n  return arr.reduce(function (r, i) {\n    return !r.some(function (j) {\n      return Object.keys(i).length === Object.keys(j).length && !Object.keys(i).some(function (k) {\n        return i[k] !== j[k];\n      });\n    }) ? [].concat(_toConsumableArray(r), [i]) : r;\n  }, []);\n};\nexport var getAttrListing = function getAttrListing() {\n  var attr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return attr.length > 0 ? Object.keys(attr[0]).map(function (el) {\n    return {\n      names: el,\n      values: _toConsumableArray(new Set(attr.map(function (elx) {\n        return elx[el];\n      })))\n    };\n  }) : [];\n};\nexport var getFeaturedProduct = function getFeaturedProduct() {\n  var products = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var filterProduct = getVisibleProducts(products).filter(function (el) {\n    if (!el) return false;\n    if (el.featured !== true) return false;\n    return true;\n  });\n  return filterProduct;\n};\nexport var getVisibleProducts = function getVisibleProducts() {\n  var products = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var productsList = products.filter(function (el) {\n    if (!el) return false;\n    if (el.visibilitytype !== true) return false;\n    return true;\n  });\n  return productsList.map(function (el) {\n    if (el.combo) return el;\n\n    if (el.variation) {\n      var verifiedAttr = filteredAttr(el.variation, el.attributes);\n      return _objectSpread(_objectSpread({}, el), {}, {\n        verifiedAttr: verifiedAttr,\n        visibleAttrList: getAttrListing(verifiedAttr)\n      });\n    } else return el;\n  });\n};\nexport var generateProductSlug = function generateProductSlug(product) {\n  var productSlug = product.title ? product.title.toLocaleLowerCase() : product.productid && product.productid.producttitle.toLocaleLowerCase();\n  return encodeUrlFn(productSlug);\n};\nexport var addSlugToProduct = function addSlugToProduct(product) {\n  return _objectSpread(_objectSpread({}, product), {}, {\n    productImage: getProductImage(product),\n    productSlug: generateProductSlug(product)\n  });\n};\nexport var getCategoriesProducts = function getCategoriesProducts(products) {\n  var productsN = products.filter(function (el) {\n    return el.categoryid;\n  });\n  var combos = products.filter(function (el) {\n    return el.combo;\n  });\n  var filtered = productsN.map(function (el) {\n    return productsN.filter(function (elx) {\n      if (el.categoryid[0] && elx.categoryid[0]) return el.categoryid[0]._id === elx.categoryid[0]._id;\n      return false;\n    });\n  }).sort(function (a, b) {\n    if (a[0] && b[0]) if (a[0].categoryid[0] && b[0].categoryid[0]) {\n      if (a[0].categoryid[0]._id < b[0].categoryid[0]._id) return -1;\n      if (a[0].categoryid[0]._id > b[0].categoryid[0]._id) return 1;\n    }\n    return 0;\n  });\n  var productsF = filtered.filter(function (el, x) {\n    if (x === 0) return true;\n\n    if (filtered[x - 1] && el[0]) {\n      if (filtered[x - 1][0]) {\n        if (filtered[x - 1][0].categoryid[0] && el[0].categoryid[0]) {\n          var prevEl = filtered[x - 1][0].categoryid[0]._id;\n          var currentEl = el[0].categoryid[0]._id;\n          return prevEl !== currentEl;\n        }\n      }\n    }\n\n    return false; // const prevEl = filtered[x - 1][0].categoryid[0]._id;\n    // const currentEl = el[0].categoryid[0]._id;\n    // return prevEl !== currentEl;\n  });\n  var cate = [].concat(_toConsumableArray(productsF), [combos]);\n  return cate.map(function (el) {\n    if (el.length) {\n      if (el[0].combo) {\n        return {\n          category: {\n            blockedcountries: [],\n            catdescription: \"Bundles\",\n            categoryid: \"Bundles\",\n            categoryslug: \"Bundles\",\n            categorytitle: \"Bundles\",\n            _id: \"Bundles\",\n            products: el\n          },\n          products: el\n        };\n      }\n\n      return {\n        category: _objectSpread(_objectSpread({}, el[0].categoryid[0]), {}, {\n          products: el\n        }),\n        products: el\n      };\n    }\n\n    return null;\n  }).filter(function (el) {\n    return el;\n  });\n};\nexport var getProductPrice = function getProductPrice(product, qty, state) {\n  var sale_price = state.sale_price,\n      regular_price = state.regular_price,\n      subscribeChecked = state.subscribeChecked,\n      subscribeDiscount = state.subscribeDiscount;\n\n  if (product.producttype === \"simple\" || product.combo === true) {\n    sale_price = product.dsaleprice;\n    regular_price = product.dregularprice;\n  }\n\n  var value = 0;\n  var qtyVal = qty ? parseInt(qty) > 0 ? parseInt(qty) : 1 : 1;\n  var currency = \"$\";\n\n  if (sale_price) {\n    value = sale_price;\n  } else if (regular_price) {\n    value = regular_price;\n  }\n\n  if (value) {\n    if (subscribeChecked) {\n      var discount = subscribeDiscount;\n      var cutPrice = value - getParentage(parseFloat(discount), value);\n\n      if (onlyNew) {\n        return __jsx(\"span\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 11\n          }\n        }, \" \" + currency, (cutPrice * qtyVal).toFixed(2));\n      }\n\n      return __jsx(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 9\n        }\n      }, \" \" + currency, __jsx(\"strike\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }\n      }, numberFormat(value * qtyVal)), \" \", (cutPrice * qtyVal).toFixed(2)); // `${currency}${basicFunction.nombarFormat(value * qtyVal)}`\n    }\n\n    return \" \".concat(currency).concat(basicFunction.numberFormat(value * qtyVal));\n  }\n\n  return \"\";\n};\nexport var getBasicPrice = function getBasicPrice(product) {\n  var verifiedAttr = product.verifiedAttr,\n      variation = product.variation,\n      combo = product.combo,\n      producttype = product.producttype;\n\n  if (combo || producttype !== \"variable\") {\n    return {\n      regular_price: product.dregularprice,\n      sale_price: product.dsaleprice\n    };\n  }\n\n  if (verifiedAttr) {\n    if (verifiedAttr.constructor === Array) {\n      if (verifiedAttr.length > 0) {\n        var findItem = variation.find(function (el) {\n          var keyList = Object.keys(verifiedAttr[0]);\n          var flag = keyList.every(function (elx) {\n            return el[elx];\n          });\n          return flag;\n        });\n\n        if (findItem) {\n          var regular_price = findItem.regular_price,\n              sale_price = findItem.sale_price;\n          return {\n            regular_price: regular_price,\n            sale_price: sale_price\n          };\n        }\n      }\n    }\n  }\n\n  return {\n    regular_price: 0,\n    sale_price: 0\n  };\n};\nexport var directAddToCart = function directAddToCart(product) {\n  var qty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var verifiedAttr = product.verifiedAttr;\n  var arr = verifiedAttr && verifiedAttr.constructor === Array ? verifiedAttr.map(function (el) {\n    var keys = Object.keys(el);\n    return keys.map(function (elx) {\n      return _defineProperty({}, elx, {\n        label: el[elx],\n        value: el[elx]\n      });\n    });\n  }) : [];\n  var obj = arr.map(function (el) {\n    return el.reduce(function (a, b) {\n      return _objectSpread(_objectSpread({}, a), b);\n    }, {});\n  });\n  var newVariation = obj && obj.length ? _objectSpread({}, obj[0]) : {};\n  return variablePriceSet(_objectSpread(_objectSpread(_objectSpread({}, product), newVariation), {}, {\n    qty: qty\n  }));\n};","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/services/helpers/product.js"],"names":["encodeUrlFn","getParentage","numberFormat","variablePriceSet","getProductImage","product","image","productid","featurefilepath","productId","featureimage","galleryimgdetails","sectionbimage","getProductImageArray","getProductAttributes","allProducts","combo","products","map","el","combo_pid","thisProduct","find","elx","_id","title","producttitle","description","filter","attributecontent","getProductDescription","getProductTitle","getProductShortDesc","sdescription","filteredAttr","variation","attr","attrX","sale_price","sku","bar","regular_price","rest","attrY","Object","keys","length","attrZ","removeDuplicateObjAr","arr","reduce","r","i","some","j","k","getAttrListing","names","values","Set","getFeaturedProduct","filterProduct","getVisibleProducts","featured","productsList","visibilitytype","verifiedAttr","attributes","visibleAttrList","generateProductSlug","productSlug","toLocaleLowerCase","addSlugToProduct","productImage","getCategoriesProducts","productsN","categoryid","combos","filtered","sort","a","b","productsF","x","prevEl","currentEl","cate","category","blockedcountries","catdescription","categoryslug","categorytitle","getProductPrice","qty","state","subscribeChecked","subscribeDiscount","producttype","dsaleprice","dregularprice","value","qtyVal","parseInt","currency","discount","cutPrice","parseFloat","onlyNew","toFixed","basicFunction","getBasicPrice","constructor","Array","findItem","keyList","flag","every","directAddToCart","label","obj","newVariation"],"mappings":"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","sourcesContent":["import { encodeUrlFn, getParentage, numberFormat } from \"./misc\";\nimport { variablePriceSet } from \"./cart\";\nexport const getProductImage = (product = {}, image = \"main\") => {\n  if (image === \"main\") {\n    if (product.productid) {\n      if (product.productid.featurefilepath)\n        return product.productid.featurefilepath;\n    }\n    if (product.productId) {\n      if (product.productId.featurefilepath)\n        return product.productId.featurefilepath;\n    }\n    if (product.featureimage) return product.featureimage;\n    if (product.galleryimgdetails) return product.galleryimgdetails[0];\n  }\n  if (image === \"sectionB\") {\n    if (product.productid) {\n      if (product.productid.sectionbimage)\n        return product.productid.sectionbimage;\n    }\n    if (product.productId) {\n      if (product.productId.sectionbimage)\n        return product.productId.sectionbimage;\n    }\n\n    if (product.sectionbimage) return product.sectionbimage;\n  }\n  return null;\n};\nexport const getProductImageArray = (product = {}) => {\n  let image = [];\n  if (product.productid) {\n    if (product.productid.featurefilepath)\n      image = [...image, product.productid.featurefilepath];\n  }\n  if (product.featureimage) image = [...image, product.featureimage];\n  if (product.galleryimgdetails)\n    image = [...image, ...product.galleryimgdetails];\n  return image;\n};\nexport const getProductAttributes = (product = {}, allProducts = []) => {\n  if (product.combo) {\n    return product.products\n      .map((el) => {\n        const { combo_pid } = el;\n        const thisProduct = allProducts.find((elx) => elx._id === combo_pid);\n        if (thisProduct) {\n          return {\n            title:\n              thisProduct.title ||\n              (thisProduct.productid && thisProduct.productid.producttitle),\n            description:\n              thisProduct.description ||\n              (thisProduct.productid && thisProduct.productid.description),\n          };\n        }\n        return null;\n      })\n      .filter((el) => el);\n  }\n  return product.attributecontent || [];\n};\nexport const getProductDescription = (product) => {\n  if (product) {\n    if (product.productid) {\n      return product.productid.description;\n    }\n    if (product.description) {\n      return product.description;\n    }\n  }\n  return \"\";\n};\nexport const getProductTitle = (product) => {\n  if (product) {\n    if (product.title) {\n      return product.title;\n    }\n    if (product.productid) {\n      return product.productid.producttitle;\n    }\n    if (product.producttitle) {\n      return product.producttitle;\n    }\n  }\n  return \"\";\n};\nexport const getProductShortDesc = (product) => {\n  if (product) {\n    if (product.sdescription) {\n      return product.sdescription;\n    }\n    if (product.productid) {\n      return product.productid.sdescription;\n    }\n  }\n  return \"\";\n};\n\n//\n\nexport const filteredAttr = (variation, attr) => {\n  const attrX = variation.map((el) => {\n    const { sale_price, sku, bar, regular_price, ...rest } = el;\n    return {\n      ...rest,\n    };\n  });\n  const attrY = attrX.filter((el) => Object.keys(el).length === attr.length);\n  const attrZ = removeDuplicateObjAr(attrY);\n\n  return attrZ;\n};\n\nexport const removeDuplicateObjAr = (arr) =>\n  arr.reduce(\n    (r, i) =>\n      !r.some(\n        (j) =>\n          Object.keys(i).length === Object.keys(j).length &&\n          !Object.keys(i).some((k) => i[k] !== j[k])\n      )\n        ? [...r, i]\n        : r,\n    []\n  );\n\nexport const getAttrListing = (attr = []) =>\n  attr.length > 0\n    ? Object.keys(attr[0]).map((el) => ({\n        names: el,\n        values: [...new Set(attr.map((elx) => elx[el]))],\n      }))\n    : [];\nexport const getFeaturedProduct = (products = []) => {\n  const filterProduct = getVisibleProducts(products).filter((el) => {\n    if (!el) return false;\n    if (el.featured !== true) return false;\n\n    return true;\n  });\n\n  return filterProduct;\n};\nexport const getVisibleProducts = (products = []) => {\n  const productsList = products.filter((el) => {\n    if (!el) return false;\n    if (el.visibilitytype !== true) return false;\n\n    return true;\n  });\n  return productsList.map((el) => {\n    if (el.combo) return el;\n    if (el.variation) {\n      const verifiedAttr = filteredAttr(el.variation, el.attributes);\n      return {\n        ...el,\n        verifiedAttr,\n        visibleAttrList: getAttrListing(verifiedAttr),\n      };\n    } else return el;\n  });\n};\n\nexport const generateProductSlug = (product) => {\n  const productSlug = product.title\n    ? product.title.toLocaleLowerCase()\n    : product.productid && product.productid.producttitle.toLocaleLowerCase();\n\n  return encodeUrlFn(productSlug);\n};\nexport const addSlugToProduct = (product) => ({\n  ...product,\n  productImage: getProductImage(product),\n  productSlug: generateProductSlug(product),\n});\n\nexport const getCategoriesProducts = (products) => {\n  const productsN = products.filter((el) => el.categoryid);\n  const combos = products.filter((el) => el.combo);\n\n  const filtered = productsN\n    .map((el) => {\n      return productsN.filter((elx) => {\n        if (el.categoryid[0] && elx.categoryid[0])\n          return el.categoryid[0]._id === elx.categoryid[0]._id;\n\n        return false;\n      });\n    })\n    .sort((a, b) => {\n      if (a[0] && b[0])\n        if (a[0].categoryid[0] && b[0].categoryid[0]) {\n          if (a[0].categoryid[0]._id < b[0].categoryid[0]._id) return -1;\n          if (a[0].categoryid[0]._id > b[0].categoryid[0]._id) return 1;\n        }\n      return 0;\n    });\n\n  const productsF = filtered.filter((el, x) => {\n    if (x === 0) return true;\n    if (filtered[x - 1] && el[0]) {\n      if (filtered[x - 1][0]) {\n        if (filtered[x - 1][0].categoryid[0] && el[0].categoryid[0]) {\n          const prevEl = filtered[x - 1][0].categoryid[0]._id;\n          const currentEl = el[0].categoryid[0]._id;\n          return prevEl !== currentEl;\n        }\n      }\n    }\n    return false;\n    // const prevEl = filtered[x - 1][0].categoryid[0]._id;\n    // const currentEl = el[0].categoryid[0]._id;\n\n    // return prevEl !== currentEl;\n  });\n  const cate = [...productsF, combos];\n  return cate\n    .map((el) => {\n      if (el.length) {\n        if (el[0].combo) {\n          return {\n            category: {\n              blockedcountries: [],\n              catdescription: \"Bundles\",\n              categoryid: \"Bundles\",\n              categoryslug: \"Bundles\",\n              categorytitle: \"Bundles\",\n              _id: \"Bundles\",\n              products: el,\n            },\n            products: el,\n          };\n        }\n        return {\n          category: {\n            ...el[0].categoryid[0],\n            products: el,\n          },\n          products: el,\n        };\n      }\n      return null;\n    })\n    .filter((el) => el);\n};\n\nexport const getProductPrice = (product, qty, state) => {\n  var {\n    sale_price,\n    regular_price,\n    subscribeChecked,\n    subscribeDiscount,\n  } = state;\n  if (product.producttype === \"simple\" || product.combo === true) {\n    sale_price = product.dsaleprice;\n    regular_price = product.dregularprice;\n  }\n  let value = 0;\n  const qtyVal = qty ? (parseInt(qty) > 0 ? parseInt(qty) : 1) : 1;\n  let currency = `$`;\n  if (sale_price) {\n    value = sale_price;\n  } else if (regular_price) {\n    value = regular_price;\n  }\n  if (value) {\n    if (subscribeChecked) {\n      const discount = subscribeDiscount;\n\n      const cutPrice = value - getParentage(parseFloat(discount), value);\n      if (onlyNew) {\n        return (\n          <span>\n            {\" \" + currency}\n            {(cutPrice * qtyVal).toFixed(2)}\n          </span>\n        );\n      }\n      return (\n        <span>\n          {\" \" + currency}\n          <strike>{numberFormat(value * qtyVal)}</strike>{\" \"}\n          {(cutPrice * qtyVal).toFixed(2)}\n        </span>\n      );\n\n      // `${currency}${basicFunction.nombarFormat(value * qtyVal)}`\n    }\n    return ` ${currency}${basicFunction.numberFormat(value * qtyVal)}`;\n  }\n  return ``;\n};\n\nexport const getBasicPrice = (product) => {\n  const { verifiedAttr, variation, combo, producttype } = product;\n  if (combo || producttype !== \"variable\") {\n    return {\n      regular_price: product.dregularprice,\n      sale_price: product.dsaleprice,\n    };\n  }\n  if (verifiedAttr) {\n    if (verifiedAttr.constructor === Array) {\n      if (verifiedAttr.length > 0) {\n        const findItem = variation.find((el) => {\n          const keyList = Object.keys(verifiedAttr[0]);\n          const flag = keyList.every((elx) => el[elx]);\n          return flag;\n        });\n        if (findItem) {\n          const { regular_price, sale_price } = findItem;\n          return {\n            regular_price,\n            sale_price,\n          };\n        }\n      }\n    }\n  }\n  return {\n    regular_price: 0,\n    sale_price: 0,\n  };\n};\n\nexport const directAddToCart = (product, qty = 1) => {\n  const { verifiedAttr } = product;\n  const arr =\n    verifiedAttr && verifiedAttr.constructor === Array\n      ? verifiedAttr.map((el) => {\n          const keys = Object.keys(el);\n          return keys.map((elx) => {\n            return {\n              [elx]: {\n                label: el[elx],\n                value: el[elx],\n              },\n            };\n          });\n        })\n      : [];\n  const obj = arr.map((el) => {\n    return el.reduce((a, b) => {\n      return { ...a, ...b };\n    }, {});\n  });\n\n  const newVariation =\n    obj && obj.length\n      ? {\n          ...obj[0],\n        }\n      : {};\n  return variablePriceSet({\n    ...product,\n    ...newVariation,\n    qty,\n  });\n};\n"]},"metadata":{},"sourceType":"module"}