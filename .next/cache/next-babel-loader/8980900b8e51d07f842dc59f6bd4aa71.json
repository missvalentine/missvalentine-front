{"ast":null,"code":"var _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/pages/e-catalogue.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport dynamic from 'next/dynamic';\nimport '../components/styles/pages/_catalogue.scss';\nconst Layout = dynamic(() => import('../components/Layouts/Layout'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('../components/Layouts/Layout')],\n    modules: ['../components/Layouts/Layout']\n  }\n});\nconst Heading = dynamic(() => import('../components/Heading'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('../components/Heading')],\n    modules: ['../components/Heading']\n  }\n});\nimport { getCategories, getProducts } from '../redux/actions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Select, Input, Button, Modal } from 'antd';\nimport { getSubcategory, createContact } from '../services/apis/admin.js';\nimport { Fade } from 'reactstrap';\nimport Product from '../components/Product.js';\nconst {\n  Option\n} = Select;\nexport default function ECatalogue() {\n  const dispatch = useDispatch();\n  const {\n    0: value,\n    1: setValue\n  } = useState({\n    name: '',\n    storeName: '',\n    phoneNumber: '',\n    address: '',\n    city: '',\n    state: '',\n    category: {},\n    subCategory: {}\n  });\n  const {\n    0: selectableProducts,\n    1: setSelectableProducts\n  } = useState([]);\n  const {\n    0: selectedProducts,\n    1: setSelectedProducts\n  } = useState([]);\n  const {\n    0: showSubCate,\n    1: setShowSubCate\n  } = useState(false);\n\n  const handleInputChange = event => {\n    setValue(_objectSpread(_objectSpread({}, value), {}, {\n      [event.target.name]: event.target.value\n    }));\n  };\n\n  function handleCategoryChange(v) {\n    setValue(_objectSpread(_objectSpread({}, value), {}, {\n      category: v,\n      subCategory: {}\n    }));\n    const isSubCateExist = Object.keys(v.subcategories).length !== 0;\n\n    if (isSubCateExist) {\n      const isSubCateWithProductExist = v.subcategories.filter(sCate => sCate.products.length > 0).length > 0;\n      if (isSubCateWithProductExist) setShowSubCate(true);else setShowSubCate(false);\n    } else setShowSubCate(false);\n  }\n\n  function handleSubCategoryChange(v) {\n    setValue(_objectSpread(_objectSpread({}, value), {}, {\n      subCategory: v\n    }));\n  }\n\n  const products = useSelector(state => state.products);\n  useEffect(() => {\n    dispatch(getCategories());\n  }, []);\n\n  const handleLoadProducts = () => {\n    if (value.subCategory._id) {\n      getSubcategory(value.subCategory._id).then(res => {\n        setSelectableProducts(res.data.products);\n      }).catch(err => setSelectableProducts(value.category.products));\n    } else {\n      setSelectableProducts(value.category.products);\n    }\n  };\n\n  const handleSelectClick = data => {\n    let tempSelectedProducts = [...selectedProducts];\n    const isSelected = selectedProducts.filter(prd => prd._id === data._id).length > 0;\n    console.log('isSelected', isSelected);\n\n    if (isSelected) {\n      tempSelectedProducts = tempSelectedProducts.filter(prd => prd._id !== data._id);\n    } else {\n      tempSelectedProducts.push(data);\n    }\n\n    console.log('tempSelectedProducts', tempSelectedProducts);\n    setSelectedProducts(tempSelectedProducts);\n  };\n\n  const handleSendEnquiry = () => {\n    const contactData = {\n      name: value.name,\n      storeName: value.storeName,\n      phone: value.phoneNumber,\n      address: value.address,\n      city: value.city,\n      state: value.state,\n      products: selectedProducts,\n      callScreen: 'enquiry'\n    };\n    createContact(contactData);\n    Modal.success({\n      title: 'Enquiry Request Registered Successfully!'\n    });\n  };\n\n  return __jsx(Layout, {\n    headerVersions: ['bg-dark'],\n    headerTheme: \"black\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"c-catalogue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, __jsx(Heading, {\n    versions: ['shop-all'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, 'Enquiry Form'), __jsx(\"div\", {\n    className: \"c-catalogue__options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, \"Name\"), __jsx(Input, {\n    placeholder: \"Enter your name\",\n    name: \"name\",\n    value: value.name,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, \"Store Name\"), __jsx(Input, {\n    placeholder: \"Enter your store name\",\n    name: \"storeName\",\n    value: value.storeName,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, \"Phone Number\"), __jsx(Input, {\n    placeholder: \"Enter your phone no\",\n    name: \"phoneNumber\",\n    value: value.phoneNumber,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    className: \" row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }, \"Address\"), __jsx(Input, {\n    placeholder: \"Enter your address\",\n    name: \"address\",\n    value: value.address,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, \"City\"), __jsx(Input, {\n    placeholder: \"Enter your city\",\n    name: \"city\",\n    value: value.city,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, \"State\"), __jsx(Input, {\n    placeholder: \"Enter your state\",\n    name: \"state\",\n    value: value.state,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    className: \" row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }, \"Category\"), __jsx(Select, {\n    value: value.category.name,\n    onChange: handleCategoryChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, products.categories.map(cate => __jsx(Option, {\n    key: cate._id,\n    value: cate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  }, cate.name)))), value.category !== {} && showSubCate && value.category.subcategories && __jsx(\"div\", {\n    className: \"col-12 col-lg-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, \"Sub Category (Optional)\"), __jsx(Select, {\n    value: value.subCategory.name,\n    onChange: handleSubCategoryChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, value.category.subcategories.filter(sCate => sCate.products.length > 0).map(sCate => __jsx(Option, {\n    key: sCate._id,\n    value: sCate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 25\n    }\n  }, sCate.name))))), __jsx(\"div\", {\n    className: \"row load-btn-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }, __jsx(Button, {\n    className: \"load-btn\",\n    onClick: handleLoadProducts,\n    disabled: !value.category.products,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, \"Load Products\"))), selectedProducts.length !== 0 && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"c-catalogue__products c-catalogue__products-selected row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }\n  }, __jsx(Heading, {\n    className: \"col-12 my-2\",\n    versions: ['shop-all'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }\n  }, 'Selected Products'), selectedProducts.map((el, i) => __jsx(\"div\", {\n    key: el._id,\n    className: \"col-lg-4 col-md-6 my-3\",\n    style: {\n      padding: '0 40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }, __jsx(Fade, {\n    key: el._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 19\n    }\n  }, __jsx(Product, {\n    data: el,\n    isSelectable: true,\n    isSelected: selectedProducts.filter(prd => prd._id === el._id).length > 0,\n    handleSelectClick: handleSelectClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 21\n    }\n  })))), __jsx(\"div\", {\n    className: \"col-12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    className: \"\",\n    onClick: handleSendEnquiry,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, \"Send Enquiry\")))), __jsx(\"div\", {\n    className: \"c-catalogue__products row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 9\n    }\n  }, selectableProducts.length !== 0 && selectableProducts.map((el, i) => __jsx(\"div\", {\n    key: el._id,\n    className: \"col-lg-4 col-md-6 my-3\",\n    style: {\n      padding: '0 40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  }, __jsx(Fade, {\n    key: el._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }\n  }, __jsx(Product, {\n    data: el,\n    isSelectable: true,\n    isSelected: selectedProducts.filter(prd => prd._id === el._id).length > 0,\n    handleSelectClick: handleSelectClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 19\n    }\n  })))))));\n}\n\nECatalogue.getInitialProps = async ctx => {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js');\n  const json = await res.json();\n  return {\n    stars: json.stargazers_count\n  };\n};","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/pages/e-catalogue.js"],"names":["React","useState","useEffect","dynamic","Layout","ssr","Heading","getCategories","getProducts","useSelector","useDispatch","Select","Input","Button","Modal","getSubcategory","createContact","Fade","Product","Option","ECatalogue","dispatch","value","setValue","name","storeName","phoneNumber","address","city","state","category","subCategory","selectableProducts","setSelectableProducts","selectedProducts","setSelectedProducts","showSubCate","setShowSubCate","handleInputChange","event","target","handleCategoryChange","v","isSubCateExist","Object","keys","subcategories","length","isSubCateWithProductExist","filter","sCate","products","handleSubCategoryChange","handleLoadProducts","_id","then","res","data","catch","err","handleSelectClick","tempSelectedProducts","isSelected","prd","console","log","push","handleSendEnquiry","contactData","phone","callScreen","success","title","categories","map","cate","el","i","padding","getInitialProps","ctx","fetch","json","stars","stargazers_count"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport dynamic from 'next/dynamic';\nimport '../components/styles/pages/_catalogue.scss';\nconst Layout = dynamic(() => import('../components/Layouts/Layout'), {\n  ssr: false,\n});\nconst Heading = dynamic(() => import('../components/Heading'), {\n  ssr: false,\n});\nimport { getCategories, getProducts } from '../redux/actions';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { Select, Input, Button, Modal } from 'antd';\nimport { getSubcategory, createContact } from '../services/apis/admin.js';\nimport { Fade } from 'reactstrap';\nimport Product from '../components/Product.js';\n\nconst { Option } = Select;\n\nexport default function ECatalogue() {\n  const dispatch = useDispatch();\n  const [value, setValue] = useState({\n    name: '',\n    storeName: '',\n    phoneNumber: '',\n    address: '',\n    city: '',\n    state: '',\n    category: {},\n    subCategory: {},\n  });\n  const [selectableProducts, setSelectableProducts] = useState([]);\n  const [selectedProducts, setSelectedProducts] = useState([]);\n\n  const [showSubCate, setShowSubCate] = useState(false);\n\n  const handleInputChange = (event) => {\n    setValue({ ...value, [event.target.name]: event.target.value });\n  };\n\n  function handleCategoryChange(v) {\n    setValue({ ...value, category: v, subCategory: {} });\n    const isSubCateExist = Object.keys(v.subcategories).length !== 0;\n    if (isSubCateExist) {\n      const isSubCateWithProductExist =\n        v.subcategories.filter((sCate) => sCate.products.length > 0).length > 0;\n      if (isSubCateWithProductExist) setShowSubCate(true);\n      else setShowSubCate(false);\n    } else setShowSubCate(false);\n  }\n\n  function handleSubCategoryChange(v) {\n    setValue({ ...value, subCategory: v });\n  }\n\n  const products = useSelector((state) => state.products);\n\n  useEffect(() => {\n    dispatch(getCategories());\n  }, []);\n\n  const handleLoadProducts = () => {\n    if (value.subCategory._id) {\n      getSubcategory(value.subCategory._id)\n        .then((res) => {\n          setSelectableProducts(res.data.products);\n        })\n        .catch((err) => setSelectableProducts(value.category.products));\n    } else {\n      setSelectableProducts(value.category.products);\n    }\n  };\n\n  const handleSelectClick = (data) => {\n    let tempSelectedProducts = [...selectedProducts];\n    const isSelected =\n      selectedProducts.filter((prd) => prd._id === data._id).length > 0;\n    console.log('isSelected', isSelected);\n    if (isSelected) {\n      tempSelectedProducts = tempSelectedProducts.filter(\n        (prd) => prd._id !== data._id\n      );\n    } else {\n      tempSelectedProducts.push(data);\n    }\n    console.log('tempSelectedProducts', tempSelectedProducts);\n\n    setSelectedProducts(tempSelectedProducts);\n  };\n\n  const handleSendEnquiry = () => {\n    const contactData = {\n      name: value.name,\n      storeName: value.storeName,\n      phone: value.phoneNumber,\n      address: value.address,\n      city: value.city,\n      state: value.state,\n      products: selectedProducts,\n      callScreen: 'enquiry',\n    };\n    createContact(contactData);\n    Modal.success({\n      title: 'Enquiry Request Registered Successfully!',\n    });\n  };\n\n  return (\n    <Layout headerVersions={['bg-dark']} headerTheme=\"black\">\n      <div className=\"c-catalogue\">\n        <Heading versions={['shop-all']}>{'Enquiry Form'}</Heading>\n        <div className=\"c-catalogue__options\">\n          <div className=\"row\">\n            <div className=\"col-12 col-lg-4 \">\n              <p>Name</p>\n              <Input\n                placeholder=\"Enter your name\"\n                name=\"name\"\n                value={value.name}\n                onChange={handleInputChange}\n              />\n            </div>\n            <div className=\"col-12 col-lg-4 \">\n              <p>Store Name</p>\n              <Input\n                placeholder=\"Enter your store name\"\n                name=\"storeName\"\n                value={value.storeName}\n                onChange={handleInputChange}\n              />\n            </div>\n            <div className=\"col-12 col-lg-4 \">\n              <p>Phone Number</p>\n              <Input\n                placeholder=\"Enter your phone no\"\n                name=\"phoneNumber\"\n                value={value.phoneNumber}\n                onChange={handleInputChange}\n              />\n            </div>\n          </div>\n          <div className=\" row\">\n            <div className=\"col-12 col-lg-4 \">\n              <p>Address</p>\n              <Input\n                placeholder=\"Enter your address\"\n                name=\"address\"\n                value={value.address}\n                onChange={handleInputChange}\n              />\n            </div>\n            <div className=\"col-12 col-lg-4 \">\n              <p>City</p>\n              <Input\n                placeholder=\"Enter your city\"\n                name=\"city\"\n                value={value.city}\n                onChange={handleInputChange}\n              />\n            </div>\n            <div className=\"col-12 col-lg-4 \">\n              <p>State</p>\n              <Input\n                placeholder=\"Enter your state\"\n                name=\"state\"\n                value={value.state}\n                onChange={handleInputChange}\n              />\n            </div>\n          </div>\n          <div className=\" row\">\n            <div className=\"col-12 col-lg-4 \">\n              <p>Category</p>\n              <Select\n                value={value.category.name}\n                onChange={handleCategoryChange}\n              >\n                {products.categories.map((cate) => (\n                  <Option key={cate._id} value={cate}>\n                    {cate.name}\n                  </Option>\n                ))}\n              </Select>\n            </div>\n            {value.category !== {} &&\n              showSubCate &&\n              value.category.subcategories && (\n                <div className=\"col-12 col-lg-4 \">\n                  <p>Sub Category (Optional)</p>\n                  <Select\n                    value={value.subCategory.name}\n                    onChange={handleSubCategoryChange}\n                  >\n                    {value.category.subcategories\n                      .filter((sCate) => sCate.products.length > 0)\n                      .map((sCate) => (\n                        <Option key={sCate._id} value={sCate}>\n                          {sCate.name}\n                        </Option>\n                      ))}\n                  </Select>\n                </div>\n              )}\n          </div>\n          <div className=\"row load-btn-wrapper\">\n            <Button\n              className=\"load-btn\"\n              onClick={handleLoadProducts}\n              disabled={!value.category.products}\n            >\n              Load Products\n            </Button>\n          </div>\n        </div>\n        {selectedProducts.length !== 0 && (\n          <>\n            <div className=\"c-catalogue__products c-catalogue__products-selected row\">\n              <Heading className=\"col-12 my-2\" versions={['shop-all']}>\n                {'Selected Products'}\n              </Heading>\n\n              {selectedProducts.map((el, i) => (\n                <div\n                  key={el._id}\n                  className=\"col-lg-4 col-md-6 my-3\"\n                  style={{ padding: '0 40px' }}\n                >\n                  <Fade key={el._id}>\n                    <Product\n                      data={el}\n                      isSelectable\n                      isSelected={\n                        selectedProducts.filter((prd) => prd._id === el._id)\n                          .length > 0\n                      }\n                      handleSelectClick={handleSelectClick}\n                    />\n                  </Fade>\n                </div>\n              ))}\n              <div className=\"col-12 text-center\">\n                <Button className=\"\" onClick={handleSendEnquiry}>\n                  Send Enquiry\n                </Button>\n              </div>\n            </div>\n          </>\n        )}\n        <div className=\"c-catalogue__products row\">\n          {selectableProducts.length !== 0 &&\n            selectableProducts.map((el, i) => (\n              <div\n                key={el._id}\n                className=\"col-lg-4 col-md-6 my-3\"\n                style={{ padding: '0 40px' }}\n              >\n                <Fade key={el._id}>\n                  <Product\n                    data={el}\n                    isSelectable\n                    isSelected={\n                      selectedProducts.filter((prd) => prd._id === el._id)\n                        .length > 0\n                    }\n                    handleSelectClick={handleSelectClick}\n                  />\n                </Fade>\n              </div>\n            ))}\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nECatalogue.getInitialProps = async (ctx) => {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js');\n  const json = await res.json();\n  return { stars: json.stargazers_count };\n};\n"]},"metadata":{},"sourceType":"module"}