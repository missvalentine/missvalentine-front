{"ast":null,"code":"var _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/pages/e-catalogue.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport dynamic from 'next/dynamic';\nimport '../components/styles/pages/_catalogue.scss';\nconst Layout = dynamic(() => import('../components/Layouts/Layout'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('../components/Layouts/Layout')],\n    modules: ['../components/Layouts/Layout']\n  }\n});\nconst Heading = dynamic(() => import('../components/Heading'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('../components/Heading')],\n    modules: ['../components/Heading']\n  }\n});\nimport { getCategories, getProducts } from '../redux/actions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Select, Input, Button, Modal } from 'antd';\nimport { getSubcategory } from '../services/apis/admin.js';\nimport { Fade } from 'reactstrap';\nimport Product from '../components/Product.js';\nconst {\n  Option\n} = Select;\nexport default function ECatalogue() {\n  const dispatch = useDispatch();\n  const {\n    0: value,\n    1: setValue\n  } = useState({\n    name: '',\n    storeName: '',\n    phoneNumber: '',\n    address: '',\n    city: '',\n    state: '',\n    category: {},\n    subCategory: {}\n  });\n  const {\n    0: reload,\n    1: setReload\n  } = useState(false);\n  const {\n    0: selectableProducts,\n    1: setSelectableProducts\n  } = useState([]);\n  const {\n    0: selectedProducts,\n    1: setSelectedProducts\n  } = useState([]);\n  const {\n    0: showSubCate,\n    1: setShowSubCate\n  } = useState(false);\n\n  function handleCategoryChange(v) {\n    setValue(_objectSpread(_objectSpread({}, value), {}, {\n      category: v,\n      subCategory: {}\n    }));\n    const isSubCateExist = Object.keys(v.subcategories).length !== 0;\n\n    if (isSubCateExist) {\n      const isSubCateWithProductExist = v.subcategories.filter(sCate => sCate.products.length > 0).length > 0;\n      if (isSubCateWithProductExist) setShowSubCate(true);else setShowSubCate(false);\n    } else setShowSubCate(false);\n  }\n\n  function handleSubCategoryChange(v) {\n    setValue(_objectSpread(_objectSpread({}, value), {}, {\n      subCategory: v\n    }));\n  }\n\n  const products = useSelector(state => state.products);\n  useEffect(() => {\n    dispatch(getCategories());\n  }, []);\n\n  const handleLoadProducts = () => {\n    setReload(true);\n\n    if (value.subCategory._id) {\n      console.log('subcate');\n      getSubcategory(value.subCategory._id).then(res => {\n        setSelectableProducts(res.data.products);\n      }).catch(err => setSelectableProducts(value.category.products));\n    } else {\n      console.log('cate', value.category.products);\n      setSelectableProducts(value.category.products);\n    }\n\n    setReload(false);\n  };\n\n  const handleSelectClick = data => {\n    let tempSelectedProducts = [...selectedProducts];\n    const isSelected = selectedProducts.filter(prd => prd._id === data._id).length > 0;\n    console.log('isSelected', isSelected);\n\n    if (isSelected) {\n      tempSelectedProducts = tempSelectedProducts.filter(prd => prd._id !== data._id);\n    } else {\n      tempSelectedProducts.push(data);\n    }\n\n    console.log('tempSelectedProducts', tempSelectedProducts);\n    setSelectedProducts(tempSelectedProducts);\n  };\n\n  const handleSendEnquiry = () => {\n    Modal.success({\n      content: 'some messages...some messages...'\n    });\n  };\n\n  return __jsx(Layout, {\n    headerVersions: ['bg-dark'],\n    headerTheme: \"black\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"c-catalogue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, __jsx(Heading, {\n    versions: ['shop-all'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, 'Enquiry Form'), __jsx(\"div\", {\n    className: \"c-catalogue__options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \" row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, \"Name\"), __jsx(Input, {\n    placeholder: \"Enter your name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, \"Store Name\"), __jsx(Input, {\n    placeholder: \"Enter your store name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, \"Phone Number\"), __jsx(Input, {\n    placeholder: \"Enter your phone no\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    className: \" row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, \"Address\"), __jsx(Input, {\n    placeholder: \"Enter your address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, \"City\"), __jsx(Input, {\n    placeholder: \"Enter your city\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, \"State\"), __jsx(Input, {\n    placeholder: \"Enter your state\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    className: \" row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, \"Category\"), __jsx(Select, {\n    value: value.category.name,\n    onChange: handleCategoryChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, products.categories.map(cate => __jsx(Option, {\n    key: cate._id,\n    value: cate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, cate.name)))), value.category !== {} && showSubCate && value.category.subcategories && __jsx(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }, \"Sub Category (Optional)\"), __jsx(Select, {\n    value: value.subCategory.name,\n    onChange: handleSubCategoryChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 19\n    }\n  }, value.category.subcategories.filter(sCate => sCate.products.length > 0).map(sCate => __jsx(Option, {\n    key: sCate._id,\n    value: sCate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }, sCate.name))))), __jsx(\"div\", {\n    className: \"row load-btn-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, __jsx(Button, {\n    className: \"load-btn\",\n    onClick: handleLoadProducts,\n    disabled: !value.category.products,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, reload ? 'loading...' : 'Load Products'))), selectedProducts.length !== 0 && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"c-catalogue__products c-catalogue__products-selected row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, __jsx(Heading, {\n    className: \"col-12 my-2\",\n    versions: ['shop-all'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }, 'Selected Products'), selectedProducts.map((el, i) => __jsx(\"div\", {\n    key: el._id,\n    className: \"col-lg-4 col-md-6 my-3\",\n    style: {\n      padding: '0 40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, __jsx(Fade, {\n    key: el._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, __jsx(Product, {\n    data: el,\n    isSelectable: true,\n    isSelected: selectedProducts.filter(prd => prd._id === el._id).length > 0,\n    handleSelectClick: handleSelectClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  })))), __jsx(\"div\", {\n    className: \"col-12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    className: \"\",\n    onClick: handleSendEnquiry,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, \"Send Enquiry\")))), __jsx(\"div\", {\n    className: \"c-catalogue__products row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, selectableProducts.length !== 0 && selectableProducts.map((el, i) => __jsx(\"div\", {\n    key: el._id,\n    className: \"col-lg-4 col-md-6 my-3\",\n    style: {\n      padding: '0 40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 15\n    }\n  }, __jsx(Fade, {\n    key: el._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, __jsx(Product, {\n    data: el,\n    isSelectable: true,\n    isSelected: selectedProducts.filter(prd => prd._id === el._id).length > 0,\n    handleSelectClick: handleSelectClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  })))))));\n}\n\nECatalogue.getInitialProps = async ctx => {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js');\n  const json = await res.json();\n  return {\n    stars: json.stargazers_count\n  };\n};","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/pages/e-catalogue.js"],"names":["React","useState","useEffect","dynamic","Layout","ssr","Heading","getCategories","getProducts","useSelector","useDispatch","Select","Input","Button","Modal","getSubcategory","Fade","Product","Option","ECatalogue","dispatch","value","setValue","name","storeName","phoneNumber","address","city","state","category","subCategory","reload","setReload","selectableProducts","setSelectableProducts","selectedProducts","setSelectedProducts","showSubCate","setShowSubCate","handleCategoryChange","v","isSubCateExist","Object","keys","subcategories","length","isSubCateWithProductExist","filter","sCate","products","handleSubCategoryChange","handleLoadProducts","_id","console","log","then","res","data","catch","err","handleSelectClick","tempSelectedProducts","isSelected","prd","push","handleSendEnquiry","success","content","categories","map","cate","el","i","padding","getInitialProps","ctx","fetch","json","stars","stargazers_count"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport dynamic from 'next/dynamic';\nimport '../components/styles/pages/_catalogue.scss';\nconst Layout = dynamic(() => import('../components/Layouts/Layout'), {\n  ssr: false,\n});\nconst Heading = dynamic(() => import('../components/Heading'), {\n  ssr: false,\n});\nimport { getCategories, getProducts } from '../redux/actions';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { Select, Input, Button, Modal } from 'antd';\nimport { getSubcategory } from '../services/apis/admin.js';\nimport { Fade } from 'reactstrap';\nimport Product from '../components/Product.js';\n\nconst { Option } = Select;\n\nexport default function ECatalogue() {\n  const dispatch = useDispatch();\n  const [value, setValue] = useState({\n    name: '',\n    storeName: '',\n    phoneNumber: '',\n    address: '',\n    city: '',\n    state: '',\n    category: {},\n    subCategory: {},\n  });\n  const [reload, setReload] = useState(false);\n  const [selectableProducts, setSelectableProducts] = useState([]);\n  const [selectedProducts, setSelectedProducts] = useState([]);\n\n  const [showSubCate, setShowSubCate] = useState(false);\n\n  function handleCategoryChange(v) {\n    setValue({ ...value, category: v, subCategory: {} });\n    const isSubCateExist = Object.keys(v.subcategories).length !== 0;\n    if (isSubCateExist) {\n      const isSubCateWithProductExist =\n        v.subcategories.filter((sCate) => sCate.products.length > 0).length > 0;\n      if (isSubCateWithProductExist) setShowSubCate(true);\n      else setShowSubCate(false);\n    } else setShowSubCate(false);\n  }\n\n  function handleSubCategoryChange(v) {\n    setValue({ ...value, subCategory: v });\n  }\n\n  const products = useSelector((state) => state.products);\n\n  useEffect(() => {\n    dispatch(getCategories());\n  }, []);\n\n  const handleLoadProducts = () => {\n    setReload(true);\n    if (value.subCategory._id) {\n      console.log('subcate');\n      getSubcategory(value.subCategory._id)\n        .then((res) => {\n          setSelectableProducts(res.data.products);\n        })\n        .catch((err) => setSelectableProducts(value.category.products));\n    } else {\n      console.log('cate', value.category.products);\n      setSelectableProducts(value.category.products);\n    }\n    setReload(false);\n  };\n\n  const handleSelectClick = (data) => {\n    let tempSelectedProducts = [...selectedProducts];\n    const isSelected =\n      selectedProducts.filter((prd) => prd._id === data._id).length > 0;\n    console.log('isSelected', isSelected);\n    if (isSelected) {\n      tempSelectedProducts = tempSelectedProducts.filter(\n        (prd) => prd._id !== data._id\n      );\n    } else {\n      tempSelectedProducts.push(data);\n    }\n    console.log('tempSelectedProducts', tempSelectedProducts);\n\n    setSelectedProducts(tempSelectedProducts);\n  };\n\n  const handleSendEnquiry = () => {\n    Modal.success({\n      content: 'some messages...some messages...',\n    });\n  };\n\n  return (\n    <Layout headerVersions={['bg-dark']} headerTheme=\"black\">\n      <div className=\"c-catalogue\">\n        <Heading versions={['shop-all']}>{'Enquiry Form'}</Heading>\n        <div className=\"c-catalogue__options\">\n          <div className=\" row\">\n            <div className=\"col-4\">\n              <p>Name</p>\n              <Input placeholder=\"Enter your name\" />\n            </div>\n            <div className=\"col-4\">\n              <p>Store Name</p>\n              <Input placeholder=\"Enter your store name\" />\n            </div>\n            <div className=\"col-4\">\n              <p>Phone Number</p>\n\n              <Input placeholder=\"Enter your phone no\" />\n            </div>\n          </div>\n          <div className=\" row\">\n            <div className=\"col-4\">\n              <p>Address</p>\n              <Input placeholder=\"Enter your address\" />\n            </div>\n            <div className=\"col-4\">\n              <p>City</p>\n              <Input placeholder=\"Enter your city\" />\n            </div>\n            <div className=\"col-4\">\n              <p>State</p>\n              <Input placeholder=\"Enter your state\" />\n            </div>\n          </div>\n          <div className=\" row\">\n            <div className=\"col-4\">\n              <p>Category</p>\n              <Select\n                value={value.category.name}\n                onChange={handleCategoryChange}\n              >\n                {products.categories.map((cate) => (\n                  <Option key={cate._id} value={cate}>\n                    {cate.name}\n                  </Option>\n                ))}\n              </Select>\n            </div>\n            {value.category !== {} &&\n              showSubCate &&\n              value.category.subcategories && (\n                <div className=\"col-4\">\n                  <p>Sub Category (Optional)</p>\n                  <Select\n                    value={value.subCategory.name}\n                    onChange={handleSubCategoryChange}\n                  >\n                    {value.category.subcategories\n                      .filter((sCate) => sCate.products.length > 0)\n                      .map((sCate) => (\n                        <Option key={sCate._id} value={sCate}>\n                          {sCate.name}\n                        </Option>\n                      ))}\n                  </Select>\n                </div>\n              )}\n          </div>\n          <div className=\"row load-btn-wrapper\">\n            <Button\n              className=\"load-btn\"\n              onClick={handleLoadProducts}\n              disabled={!value.category.products}\n            >\n              {reload ? 'loading...' : 'Load Products'}\n            </Button>\n          </div>\n        </div>\n        {selectedProducts.length !== 0 && (\n          <>\n            <div className=\"c-catalogue__products c-catalogue__products-selected row\">\n              <Heading className=\"col-12 my-2\" versions={['shop-all']}>\n                {'Selected Products'}\n              </Heading>\n\n              {selectedProducts.map((el, i) => (\n                <div\n                  key={el._id}\n                  className=\"col-lg-4 col-md-6 my-3\"\n                  style={{ padding: '0 40px' }}\n                >\n                  <Fade key={el._id}>\n                    <Product\n                      data={el}\n                      isSelectable\n                      isSelected={\n                        selectedProducts.filter((prd) => prd._id === el._id)\n                          .length > 0\n                      }\n                      handleSelectClick={handleSelectClick}\n                    />\n                  </Fade>\n                </div>\n              ))}\n              <div className=\"col-12 text-center\">\n                <Button className=\"\" onClick={handleSendEnquiry}>\n                  Send Enquiry\n                </Button>\n              </div>\n            </div>\n          </>\n        )}\n        <div className=\"c-catalogue__products row\">\n          {selectableProducts.length !== 0 &&\n            selectableProducts.map((el, i) => (\n              <div\n                key={el._id}\n                className=\"col-lg-4 col-md-6 my-3\"\n                style={{ padding: '0 40px' }}\n              >\n                <Fade key={el._id}>\n                  <Product\n                    data={el}\n                    isSelectable\n                    isSelected={\n                      selectedProducts.filter((prd) => prd._id === el._id)\n                        .length > 0\n                    }\n                    handleSelectClick={handleSelectClick}\n                  />\n                </Fade>\n              </div>\n            ))}\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nECatalogue.getInitialProps = async (ctx) => {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js');\n  const json = await res.json();\n  return { stars: json.stargazers_count };\n};\n"]},"metadata":{},"sourceType":"module"}