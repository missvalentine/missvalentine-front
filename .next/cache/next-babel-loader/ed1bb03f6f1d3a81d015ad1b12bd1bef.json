{"ast":null,"code":"var _jsxFileName = \"/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/components/MobileMenus.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport classNames from 'classnames';\nimport './styles/app.scss';\nimport { Menu, Dropdown } from 'antd';\nimport Input from './form-components/Input';\nimport { SearchOutlined } from '@ant-design/icons';\nimport apiList from '../services/apis/apiList';\nimport { getVisibleProducts, addSlugToProduct, getProductTitle, getProductShortDesc, getBasicPrice } from '../services/helpers/product';\nimport projectSettings from '../constants/projectSettings';\nimport CartItem from './CartItem';\nimport { numberFormat } from '../services/helpers/misc';\nconst {\n  SubMenu\n} = Menu;\n\nconst MobileMenu = ({\n  items,\n  user,\n  toggleCartBar,\n  toggleRegBar\n}) => {\n  const {\n    0: isOpen,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: search,\n    1: setSearch\n  } = useState('');\n  const {\n    0: display,\n    1: setDisplay\n  } = useState(false);\n  const {\n    0: products,\n    1: setProducts\n  } = useState([]);\n\n  const onSubmit = e => {\n    //console.log(`${window.location.origin}/search/${search}`);\n    // window.location.href(`${window.location.origin}/search/${search}`)\n    if (e.key === 'Enter') {\n      Router.push(`/search/${search}`);\n    }\n  };\n\n  const menu = __jsx(\"div\", {\n    className: \"search-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, __jsx(Menu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    style: {\n      marginTop: '40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }), products.length > 0 ? products.map((product, i) => __jsx(Menu.Item, {\n    style: {\n      height: 'fit-content'\n    },\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"c-cart-drawer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 15\n    }\n  }, __jsx(CartItem, {\n    key: i,\n    title: product.title,\n    image: product.image,\n    subTitle: product.totalcbdmg,\n    price: `$${numberFormat(parseFloat(product.price.sale_price))}`,\n    isSearch: true,\n    clearSearch: () => {\n      setDisplay(false);\n      setSearch('');\n      setProducts([]);\n      Router.push(`/shop/${product.title.replace(/ /g, '-')}`);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }\n  })))) : __jsx(SubMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, \"No records found\"))));\n\n  const filterProducts = async value => {\n    setSearch(value);\n\n    if (value === '') {\n      setDisplay(false);\n      setProducts([]);\n      return;\n    }\n\n    setDisplay(true);\n    const res = await fetch(apiList.getAllProducts);\n    const productList = await res.json();\n    const visibleProducts = getVisibleProducts(productList.products);\n    const newList = visibleProducts.map(el => addSlugToProduct(el));\n    const productsRow = newList.map(el => {\n      return _objectSpread(_objectSpread({}, el), {}, {\n        image: el.productImage ? projectSettings.serverUrl + el.productImage : '//via.placeholder.com/300x500',\n        title: getProductTitle(el),\n        subTitle: getProductShortDesc(el),\n        price: getBasicPrice(el),\n        qty: 1\n      });\n    });\n    const applySearch = productsRow.filter(el => {\n      if (value === '') return false;\n      return el.title.toLowerCase().includes(value.toLowerCase());\n    }); // console.log(applySearch);\n\n    setProducts(applySearch);\n  };\n\n  const onClick = (e, action) => {\n    if (action === 'link') {}\n\n    if (action === 'cart') {\n      toggleCartBar(); // setIsCartOpen(!isCartOpen)\n    }\n\n    if (action === 'reg') {\n      toggleRegBar();\n    }\n\n    if (action === 'logout') {\n      unsetUser();\n    }\n  };\n\n  return __jsx(\"ul\", {\n    className: \"c-nav__list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, items.filter(el => {\n    console.log(el);\n\n    if (user._id) {\n      return el.onlyLogin !== false;\n    } else {\n      return el.onlyLogin !== true;\n    }\n  }).map((el, ind) => __jsx(\"li\", {\n    key: ind,\n    className: classNames('c-nav__list-item', {\n      'c-nav__list-item--has-sub-menu': el.subMenus\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, el.action === 'input' ? __jsx(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    prefix: __jsx(SearchOutlined, {\n      style: {\n        color: '#aaaaaa'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 27\n      }\n    }),\n    value: search,\n    onChange: e => filterProducts(e.target.value),\n    onKeyDown: onSubmit,\n    label: \"Search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }), __jsx(Dropdown, {\n    overlayStyle: {\n      position: 'absolute',\n      top: '0 !important',\n      left: '0 !important',\n      width: '400px',\n      height: '500px',\n      overflow: 'scroll'\n    },\n    visible: display // visible={true}\n    ,\n    onVisibleChange: () => setDisplay(!display),\n    overlay: menu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    className: \"ant-dropdown-link\",\n    onClick: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }))) : '', el.link ? __jsx(Link, {\n    as: el.as || el.link,\n    href: el.link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, __jsx(\"a\", {\n    onClick: e => {\n      onClick(e, el.action);\n    },\n    className: \"c-nav__link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }, el.label, el.icon)) : __jsx(\"span\", {\n    onClick: e => {\n      onClick(e, el.action);\n    },\n    className: \"c-nav__link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }, el.label, el.icon), el.subMenus && __jsx(\"ul\", {\n    className: \"c-nav__sub-menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, el.subMenus.map((elx, i) => __jsx(\"li\", {\n    key: i,\n    className: \"c-nav__sub-menu-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 19\n    }\n  }, __jsx(Link, {\n    as: elx.as || elx.link,\n    href: elx.link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 21\n    }\n  }, __jsx(\"a\", {\n    className: \"c-nav__link c-nav__link--sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 23\n    }\n  }, elx.label))))))));\n};\n\nMobileMenu.defaultProps = {\n  items: []\n};\n\nconst mapStateToProps = state => ({\n  isCartOpen: state.drawers.isCartOpen,\n  isRegOpen: state.drawers.isRegOpen,\n  hasLogin: state.drawers.hasLogin,\n  user: state.user\n});\n\nexport default connect(mapStateToProps, {\n  toggleCartBar,\n  hideCartBar,\n  toggleRegBar,\n  unsetUser\n})(MobileMenu);","map":{"version":3,"sources":["/Users/akshataggarwal/Documents/Coding Files/webd projects/missvalentine-front/components/MobileMenus.js"],"names":["React","useState","connect","Link","classNames","Menu","Dropdown","Input","SearchOutlined","apiList","getVisibleProducts","addSlugToProduct","getProductTitle","getProductShortDesc","getBasicPrice","projectSettings","CartItem","numberFormat","SubMenu","MobileMenu","items","user","toggleCartBar","toggleRegBar","isOpen","setOpen","search","setSearch","display","setDisplay","products","setProducts","onSubmit","e","key","Router","push","menu","marginTop","length","map","product","i","height","title","image","totalcbdmg","parseFloat","price","sale_price","replace","filterProducts","value","res","fetch","getAllProducts","productList","json","visibleProducts","newList","el","productsRow","productImage","serverUrl","subTitle","qty","applySearch","filter","toLowerCase","includes","onClick","action","unsetUser","console","log","_id","onlyLogin","ind","subMenus","position","color","target","top","left","width","overflow","preventDefault","link","as","label","icon","elx","defaultProps","mapStateToProps","state","isCartOpen","drawers","isRegOpen","hasLogin","hideCartBar"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport classNames from 'classnames';\nimport './styles/app.scss';\nimport { Menu, Dropdown } from 'antd';\nimport Input from './form-components/Input';\nimport { SearchOutlined } from '@ant-design/icons';\nimport apiList from '../services/apis/apiList';\nimport {\n  getVisibleProducts,\n  addSlugToProduct,\n  getProductTitle,\n  getProductShortDesc,\n  getBasicPrice,\n} from '../services/helpers/product';\nimport projectSettings from '../constants/projectSettings';\nimport CartItem from './CartItem';\nimport { numberFormat } from '../services/helpers/misc';\nconst { SubMenu } = Menu;\nconst MobileMenu = ({ items, user, toggleCartBar, toggleRegBar }) => {\n  const [isOpen, setOpen] = useState(false);\n  const [search, setSearch] = useState('');\n  const [display, setDisplay] = useState(false);\n  const [products, setProducts] = useState([]);\n  const onSubmit = (e) => {\n    //console.log(`${window.location.origin}/search/${search}`);\n    // window.location.href(`${window.location.origin}/search/${search}`)\n    if (e.key === 'Enter') {\n      Router.push(`/search/${search}`);\n    }\n  };\n  const menu = (\n    <div className=\"search-container\">\n      <Menu>\n        <div style={{ marginTop: '40px' }}></div>\n        {products.length > 0 ? (\n          products.map((product, i) => (\n            <Menu.Item style={{ height: 'fit-content' }} key={i}>\n              <div className=\"c-cart-drawer\">\n                <CartItem\n                  key={i}\n                  title={product.title}\n                  image={product.image}\n                  subTitle={product.totalcbdmg}\n                  price={`$${numberFormat(\n                    parseFloat(product.price.sale_price)\n                  )}`}\n                  isSearch={true}\n                  clearSearch={() => {\n                    setDisplay(false);\n                    setSearch('');\n                    setProducts([]);\n                    Router.push(`/shop/${product.title.replace(/ /g, '-')}`);\n                  }}\n                />\n              </div>\n            </Menu.Item>\n          ))\n        ) : (\n          <SubMenu>\n            <h2>No records found</h2>\n          </SubMenu>\n        )}\n      </Menu>\n    </div>\n  );\n  const filterProducts = async (value) => {\n    setSearch(value);\n    if (value === '') {\n      setDisplay(false);\n      setProducts([]);\n      return;\n    }\n    setDisplay(true);\n    const res = await fetch(apiList.getAllProducts);\n    const productList = await res.json();\n    const visibleProducts = getVisibleProducts(productList.products);\n    const newList = visibleProducts.map((el) => addSlugToProduct(el));\n    const productsRow = newList.map((el) => {\n      return {\n        ...el,\n        image: el.productImage\n          ? projectSettings.serverUrl + el.productImage\n          : '//via.placeholder.com/300x500',\n        title: getProductTitle(el),\n        subTitle: getProductShortDesc(el),\n        price: getBasicPrice(el),\n        qty: 1,\n      };\n    });\n    const applySearch = productsRow.filter((el) => {\n      if (value === '') return false;\n      return el.title.toLowerCase().includes(value.toLowerCase());\n    });\n    // console.log(applySearch);\n    setProducts(applySearch);\n  };\n  const onClick = (e, action) => {\n    if (action === 'link') {\n    }\n    if (action === 'cart') {\n      toggleCartBar();\n      // setIsCartOpen(!isCartOpen)\n    }\n    if (action === 'reg') {\n      toggleRegBar();\n    }\n    if (action === 'logout') {\n      unsetUser();\n    }\n  };\n\n  return (\n    <ul className=\"c-nav__list\">\n      {items\n        .filter((el) => {\n          console.log(el);\n          if (user._id) {\n            return el.onlyLogin !== false;\n          } else {\n            return el.onlyLogin !== true;\n          }\n        })\n        .map((el, ind) => (\n          <li\n            key={ind}\n            className={classNames('c-nav__list-item', {\n              'c-nav__list-item--has-sub-menu': el.subMenus,\n            })}\n          >\n            {/* <div  onClick={()={\n                    }}  className=\"c-nav__list-item-inner\"> */}\n            {el.action === 'input' ? (\n              <div style={{ position: 'relative' }}>\n                <Input\n                  prefix={<SearchOutlined style={{ color: '#aaaaaa' }} />}\n                  value={search}\n                  onChange={(e) => filterProducts(e.target.value)}\n                  onKeyDown={onSubmit}\n                  label=\"Search\"\n                />\n                {/* {display ? ( */}\n                <Dropdown\n                  overlayStyle={{\n                    position: 'absolute',\n                    top: '0 !important',\n                    left: '0 !important',\n                    width: '400px',\n                    height: '500px',\n                    overflow: 'scroll',\n                  }}\n                  visible={display}\n                  // visible={true}\n                  onVisibleChange={() => setDisplay(!display)}\n                  overlay={menu}\n                >\n                  <a\n                    className=\"ant-dropdown-link\"\n                    onClick={(e) => e.preventDefault()}\n                  ></a>\n                </Dropdown>\n                {/* ) : null} */}\n              </div>\n            ) : (\n              ''\n            )}\n            {el.link ? (\n              <Link as={el.as || el.link} href={el.link}>\n                <a\n                  onClick={(e) => {\n                    onClick(e, el.action);\n                  }}\n                  className=\"c-nav__link\"\n                >\n                  {el.label}\n                  {el.icon}\n                </a>\n              </Link>\n            ) : (\n              <span\n                onClick={(e) => {\n                  onClick(e, el.action);\n                }}\n                className=\"c-nav__link\"\n              >\n                {el.label}\n                {el.icon}\n              </span>\n            )}\n            {/* {\n                el.subMenus && <span onClick={() => setOpen(!isOpen)} className={classNames(\"c-nav__sub-menu-tgl\", {\n                  \"c-nav__sub-menu-tgl--opened\": isOpen\n                })}>{isOpen ? <FiMinus /> : <FiPlus />}</span>\n              } */}\n            {el.subMenus && (\n              <ul className=\"c-nav__sub-menu\">\n                {el.subMenus.map((elx, i) => (\n                  <li key={i} className=\"c-nav__sub-menu-item\">\n                    <Link as={elx.as || elx.link} href={elx.link}>\n                      <a className=\"c-nav__link c-nav__link--sub\">\n                        {elx.label}\n                      </a>\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </li>\n        ))}\n    </ul>\n  );\n};\n\nMobileMenu.defaultProps = {\n  items: [],\n};\n\nconst mapStateToProps = (state) => ({\n  isCartOpen: state.drawers.isCartOpen,\n  isRegOpen: state.drawers.isRegOpen,\n  hasLogin: state.drawers.hasLogin,\n  user: state.user,\n});\n\nexport default connect(mapStateToProps, {\n  toggleCartBar,\n  hideCartBar,\n  toggleRegBar,\n  unsetUser,\n})(MobileMenu);\n"]},"metadata":{},"sourceType":"module"}